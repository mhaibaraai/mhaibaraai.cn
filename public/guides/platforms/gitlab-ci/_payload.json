[{"data":1,"prerenderedAt":7176},["ShallowReactive",2],{"navigation":3,"docs-/guides/platforms/gitlab-ci":290,"surround-/guides/platforms/gitlab-ci":7173},[4,147,227],{"title":5,"description":6,"icon":7,"path":8,"stem":9,"children":10,"page":28},"语言与生态","按语言、框架与工具分类整理，聚焦实践要点与可复用知识。","i-lucide-folder-code","/ecosystem","0.ecosystem",[11,29,46,58,70,87,118,130],{"title":12,"description":13,"icon":14,"path":15,"stem":16,"children":17,"page":28},"JavaScript","JavaScript 基础语法、异步编程和框架使用。","i-tabler-brand-javascript","/ecosystem/javascript","0.ecosystem/0.javascript",[18,23],{"title":19,"path":20,"stem":21,"description":22},"异步编程","/ecosystem/javascript/async-await","0.ecosystem/0.javascript/async-await","深入理解 Promise 和 async/await 异步编程模式",{"title":24,"path":25,"stem":26,"description":27},"网络请求","/ecosystem/javascript/fetch","0.ecosystem/0.javascript/fetch","使用 fetch API 进行网络请求和数据交互",false,{"title":30,"description":31,"icon":32,"path":33,"stem":34,"children":35,"page":28},"样式技术","CSS 和预处理器的高级特性和最佳实践","i-mdi-palette-outline","/ecosystem/styles","0.ecosystem/1.styles",[36,41],{"title":37,"path":38,"stem":39,"description":40},"CSS 高级特性","/ecosystem/styles/css","0.ecosystem/1.styles/css","CSS 变量、Flexbox 响应式布局等现代 CSS 特性",{"title":42,"path":43,"stem":44,"description":45},"Sass 预处理器","/ecosystem/styles/sass","0.ecosystem/1.styles/sass","Sass 模块化、构建工具配置和弃用警告处理",{"title":47,"description":48,"icon":49,"path":50,"stem":51,"children":52,"page":28},"TypeScript","TypeScript 的类型系统、接口、泛型等内容。","i-tabler-brand-typescript","/ecosystem/typescript","0.ecosystem/2.typescript",[53],{"title":54,"path":55,"stem":56,"description":57},"全局变量","/ecosystem/typescript/declare-global","0.ecosystem/2.typescript/declare-global","在 TypeScript 中使用全局类型。",{"title":59,"description":60,"icon":61,"path":62,"stem":63,"children":64,"page":28},"Vue","Vue.js 框架及其生态系统的使用指南和最佳实践。","i-tabler-brand-vue","/ecosystem/vue","0.ecosystem/3.vue",[65],{"title":66,"path":67,"stem":68,"description":69},"踩坑笔记","/ecosystem/vue/issues","0.ecosystem/3.vue/issues","记录 Vue 开发过程中遇到的问题和解决方案。",{"title":71,"description":72,"icon":73,"path":74,"stem":75,"children":76,"page":28},"Vite","Vite 是一个现代化的构建工具，它提供了快速的开发体验和高效的构建性能。","i-tabler-brand-vite","/ecosystem/vite","0.ecosystem/4.vite",[77,82],{"title":78,"path":79,"stem":80,"description":81},"按需自动导入","/ecosystem/vite/auto-import","0.ecosystem/4.vite/auto-import","组件、API 和图标按需自动导入，简化代码并提升开发效率。",{"title":83,"path":84,"stem":85,"description":86},"Vite 资源导入","/ecosystem/vite/resources-import","0.ecosystem/4.vite/resources-import","Vite 提供了多种灵活的静态资源导入方式，无需手动管理文件路径。",{"title":88,"description":89,"icon":90,"path":91,"stem":92,"children":93,"page":28},"Nuxt","Nuxt 是一个基于 Vue 的通用框架，用于构建服务器端渲染 (SSR) 和静态站点应用程序。","i-tabler-brand-nuxt","/ecosystem/nuxt","0.ecosystem/5.nuxt",[94,99,103,108,113],{"title":95,"path":96,"stem":97,"description":98},"Copy Page","/ecosystem/nuxt/copy-page","0.ecosystem/5.nuxt/copy-page","为用户与 LLM 提供「干净的 Markdown 原文」，可直接复制或在新标签页查看。",{"title":66,"path":100,"stem":101,"description":102},"/ecosystem/nuxt/issues","0.ecosystem/5.nuxt/issues","记录 Nuxt 开发过程中遇到的问题和解决方案。",{"title":104,"path":105,"stem":106,"description":107},"Nuxt LLMs","/ecosystem/nuxt/llms","0.ecosystem/5.nuxt/llms","使用 nuxt-llms 生成 /llms.txt，并规范化站内链接以便 LLM 抓取。",{"title":109,"path":110,"stem":111,"description":112},"Nuxt SEO","/ecosystem/nuxt/nuxt-seo","0.ecosystem/5.nuxt/nuxt-seo","Nuxt SEO 实战配置指南",{"title":114,"path":115,"stem":116,"description":117},"Nuxt SSR + PM2 部署","/ecosystem/nuxt/ssr-pm2-deploy","0.ecosystem/5.nuxt/ssr-pm2-deploy","在 Ubuntu 上使用 PM2 集群模式部署 Nuxt SSR，并通过 Nginx（Docker）反向代理与 Cloudflare 前置加速。",{"title":119,"description":120,"icon":121,"path":122,"stem":123,"children":124,"page":28},"UI 组件库","常用的 UI 组件库。","i-lucide-library","/ecosystem/ui-libraries","0.ecosystem/6.ui-libraries",[125],{"title":126,"path":127,"stem":128,"description":129},"Element Plus","/ecosystem/ui-libraries/element-plus","0.ecosystem/6.ui-libraries/element-plus","在使用 Element Plus 组件库时遇到的常见问题及其解决方案。",{"title":131,"description":132,"icon":133,"path":134,"stem":135,"children":136,"page":28},"Java","记录我在 Java 与相关框架中的理解与踩坑，包括语言基础、JVM、并发、Spring、构建与测试等。","i-mdi-language-java","/ecosystem/java","0.ecosystem/7.java",[137,142],{"title":138,"path":139,"stem":140,"description":141},"全局依赖缓存位置","/ecosystem/java/global-cache","0.ecosystem/7.java/global-cache","说明 Maven 与 Gradle 全局依赖缓存位置",{"title":143,"path":144,"stem":145,"description":146},"安装 Java 与构建工具","/ecosystem/java/mac-install","0.ecosystem/7.java/mac-install","如何使用 Homebrew 在 macOS 上安装和管理多个 Java 版本。",{"title":148,"description":149,"icon":150,"path":151,"stem":152,"children":153,"page":28},"实践指南","从环境部署到平台开发的实践指南。","i-lucide-rocket","/guides","1.guides",[154,176,193,215],{"title":155,"description":156,"icon":157,"path":158,"stem":159,"children":160,"page":28},"环境部署","Docker、PostgreSQL 和 DigitalOcean 的部署指南。","i-lucide-server","/guides/deployment","1.guides/deployment",[161,166,171],{"title":162,"path":163,"stem":164,"description":165},"DigitalOcean","/guides/deployment/digitalocean","1.guides/deployment/digitalocean","DigitalOcean 使用指南",{"title":167,"path":168,"stem":169,"description":170},"Docker","/guides/deployment/docker","1.guides/deployment/docker","Docker 安装和使用指南",{"title":172,"path":173,"stem":174,"description":175},"PostgreSQL 部署","/guides/deployment/postgresql-guide","1.guides/deployment/postgresql-guide","使用 Docker Compose 部署 PostgreSQL",{"title":177,"description":178,"icon":179,"path":180,"stem":181,"children":182,"page":28},"操作系统","macOS 和 Linux 的环境配置。","i-lucide-laptop","/guides/os","1.guides/os",[183,188],{"title":184,"path":185,"stem":186,"description":187},"Linux","/guides/os/linux","1.guides/os/linux","Linux 常用命令、服务器管理、开发环境配置等",{"title":189,"path":190,"stem":191,"description":192},"macOS","/guides/os/macos","1.guides/os/macos","记录一次 Mac 环境配置",{"title":194,"description":195,"icon":196,"path":197,"stem":198,"children":199,"page":28},"平台开发","浙政钉和 iServer 等平台的开发实践。","i-lucide-tv-minimal","/guides/platforms","1.guides/platforms",[200,205,210],{"title":201,"path":202,"stem":203,"description":204},"浙政钉开发","/guides/platforms/dingtalk","1.guides/platforms/dingtalk","浙政钉开发实用技巧",{"title":206,"path":207,"stem":208,"description":209},"GitLab CI/CD 完全指南","/guides/platforms/gitlab-ci","1.guides/platforms/gitlab-ci","一份涵盖从入门、配置到问题排查的完整 CI/CD 实践文档，实现快速上手并高效利用自动化流水线。",{"title":211,"path":212,"stem":213,"description":214},"IServer 踩坑归集","/guides/platforms/iserver","1.guides/platforms/iserver","超图服务调用踩坑归集",{"title":216,"description":217,"icon":218,"path":219,"stem":220,"children":221,"page":28},"运行时环境","Node.js、Java 等运行时环境的配置和使用指南。","i-lucide-router","/guides/runtime","1.guides/runtime",[222],{"title":223,"path":224,"stem":225,"description":226},"Node","/guides/runtime/node","1.guides/runtime/node","Node 的配置和使用指南。",{"title":228,"description":229,"icon":230,"path":231,"stem":232,"children":233,"page":28},"工具集","开发过程中常用工具的配置和使用指南。","i-lucide-wrench","/tools","2.tools",[234,256,273],{"title":235,"description":236,"icon":237,"path":238,"stem":239,"children":240,"page":28},"IDE 编辑器","编辑器的配置和使用指南。","i-lucide-monitor","/tools/editors","2.tools/editors",[241,246,251],{"title":242,"path":243,"stem":244,"description":245},"Cursor","/tools/editors/.cursor","2.tools/editors/.cursor","Cursor 的使用、配置和插件指南",{"title":247,"path":248,"stem":249,"description":250},"IntelliJ IDEA","/tools/editors/idea","2.tools/editors/idea","在 macOS 上安装和配置 IntelliJ IDEA，优化你的 Java 开发环境。",{"title":252,"path":253,"stem":254,"description":255},"VS Code","/tools/editors/vscode","2.tools/editors/vscode","VS Code 的配置和使用指南。",{"title":257,"description":258,"icon":259,"path":260,"stem":261,"children":262,"page":28},"包管理器","Homebrew 和 pnpm 等包管理器的使用。","i-lucide-hammer","/tools/package-managers","2.tools/package-managers",[263,268],{"title":264,"path":265,"stem":266,"description":267},"Homebrew","/tools/package-managers/homebrew","2.tools/package-managers/homebrew","Homebrew 的配置和使用指南。",{"title":269,"path":270,"stem":271,"description":272},"Pnpm","/tools/package-managers/pnpm","2.tools/package-managers/pnpm","pnpm 的配置和使用指南。",{"title":274,"description":275,"icon":276,"path":277,"stem":278,"children":279,"page":28},"版本控制","Git 和 fnm 等版本控制工具的配置和使用。","i-lucide-git-branch","/tools/version-control","2.tools/version-control",[280,285],{"title":281,"path":282,"stem":283,"description":284},"Fnm","/tools/version-control/fnm","2.tools/version-control/fnm","fnm 的安装、配置、使用、常见问题等。",{"title":286,"path":287,"stem":288,"description":289},"Git","/tools/version-control/git","2.tools/version-control/git","Git 的配置、使用、常见问题等。",{"id":291,"title":206,"body":292,"description":209,"extension":7167,"head":7168,"links":7168,"meta":7169,"navigation":591,"ogImage":7168,"path":207,"schemaOrg":7168,"seo":7170,"sitemap":7171,"stem":208,"__hash__":7172},"docs/1.guides/platforms/gitlab-ci.md",{"type":293,"value":294,"toc":7156},"minimark",[295,299,308,314,317,320,342,367,402,405,410,475,6770,6827,6830,6913,6921,6924,6927,6951,6961,6964,6967,7002,7008,7012,7152],[296,297,298],"h2",{"id":298},"参考文档",[300,301,304],"note",{"icon":302,"to":303},"i-lucide-book","https://gitlab.cn/docs/jh/topics/build_your_application/",[305,306,307],"p",{},"GitLab CI/CD: 使用 CI/CD 构建您的应用程序",[300,309,311],{"icon":302,"to":310},"https://developer.work.weixin.qq.com/document/path/99110",[305,312,313],{},"企业微信机器人: 消息推送配置说明",[296,315,316],{"id":316},"核心流程",[305,318,319],{},"项目的流水线被划分为多个阶段 (Stages)，确保任务按预定顺序执行，完整流程如下：",[305,321,322,326,327,326,330,326,333,326,336,326,339],{},[323,324,325],"code",{},"notify_start"," -> ",[323,328,329],{},"lint",[323,331,332],{},"sonar",[323,334,335],{},"build",[323,337,338],{},"deploy",[323,340,341],{},"notify_end",[343,344,345,353],"ul",{},[346,347,348,352],"li",{},[349,350,351],"strong",{},"lint & sonar",": 在合并请求 (Merge Request) 场景下运行，进行代码规范检查和静态质量分析，保障代码质量。",[346,354,355,358,359,362,363,366],{},[349,356,357],{},"build & deploy",": 在推送到 ",[323,360,361],{},"dev"," 或 ",[323,364,365],{},"master"," 分支，或手动触发时执行，完成应用的构建和部署。",[368,369,370],"code-preview",{},[371,372,373,384,393],"tabs",{},[374,375,378],"tabs-item",{"icon":376,"label":377},"i-lucide-git-pull-request","发起合并请求",[305,379,380],{},[381,382],"img",{"alt":377,"src":383},"/images/guides/platforms/gitlab-ci/merge-request-start.png",[374,385,388],{"icon":386,"label":387},"i-lucide-workflow","合并请求流水线",[305,389,390],{},[381,391],{"alt":387,"src":392},"/images/guides/platforms/gitlab-ci/merge-request-workflow.png",[374,394,397],{"icon":395,"label":396},"i-lucide-chart-network","build-deploy 流水线",[305,398,399],{},[381,400],{"alt":396,"src":401},"/images/guides/platforms/gitlab-ci/build-deploy-workflow.png",[296,403,404],{"id":404},"配置详解",[406,407,409],"h3",{"id":408},"cicd-文件结构","CI/CD 文件结构",[411,412,417],"pre",{"className":413,"code":414,"filename":415,"language":415,"meta":416,"style":416},"language-tree shiki shiki-themes material-theme-lighter github-light github-dark monokai",".\n├── .gitlab-ci.yml       # 主配置文件，定义 stages, workflow, variables, include 规则\n├── .gitlab-dev.yml      # dev 环境的作业 (build, deploy, notify)\n├── .gitlab-prod.yml     # prod 环境的作业 (build, notify)\n└── scripts/\n    └── ci/\n        ├── package-zip.sh     # 打包构建产物为 .zip 并生成环境变量\n        ├── deploy-zip.sh      # 部署 .zip 包到目标服务器\n        └── wechat-notify.js   # 发送企业微信通知\n","tree","",[323,418,419,427,433,439,445,451,457,463,469],{"__ignoreMap":416},[420,421,424],"span",{"class":422,"line":423},"line",1,[420,425,426],{},".\n",[420,428,430],{"class":422,"line":429},2,[420,431,432],{},"├── .gitlab-ci.yml       # 主配置文件，定义 stages, workflow, variables, include 规则\n",[420,434,436],{"class":422,"line":435},3,[420,437,438],{},"├── .gitlab-dev.yml      # dev 环境的作业 (build, deploy, notify)\n",[420,440,442],{"class":422,"line":441},4,[420,443,444],{},"├── .gitlab-prod.yml     # prod 环境的作业 (build, notify)\n",[420,446,448],{"class":422,"line":447},5,[420,449,450],{},"└── scripts/\n",[420,452,454],{"class":422,"line":453},6,[420,455,456],{},"    └── ci/\n",[420,458,460],{"class":422,"line":459},7,[420,461,462],{},"        ├── package-zip.sh     # 打包构建产物为 .zip 并生成环境变量\n",[420,464,466],{"class":422,"line":465},8,[420,467,468],{},"        ├── deploy-zip.sh      # 部署 .zip 包到目标服务器\n",[420,470,472],{"class":422,"line":471},9,[420,473,474],{},"        └── wechat-notify.js   # 发送企业微信通知\n",[476,477,480,1765,2145,2400,3134,3495],"code-tree",{":expand-all":478,"default-value":479,"expand-all":416},"true",".gitlab-ci.yml",[411,481,485],{"className":482,"code":483,"filename":479,"language":484,"meta":416,"style":416},"language-yaml shiki shiki-themes material-theme-lighter github-light github-dark monokai","# 全局规则：只在指定分支或合并到指定分支的请求中运行\nworkflow:\n  rules:\n    - if: $CI_PIPELINE_SOURCE == \"merge_request_event\"\n      when: always\n    - if: $CI_PIPELINE_SOURCE == \"push\" && ($CI_COMMIT_BRANCH == \"dev\" || $CI_COMMIT_BRANCH == \"master\")\n      when: always\n    - if: $CI_PIPELINE_SOURCE == \"web\"\n      when: always\n    - when: never\n\n# 定义流水线的阶段\nstages:\n  - notify_start\n  - lint\n  - sonar\n  - build\n  - deploy\n  - notify_end\n\n# 定义变量\nvariables:\n  NODE_VERSION: lts\n  PNPM_VERSION: latest\n  GIT_DEPTH: 0\n  GIT_STRATEGY: clone\n  BUILD_ENV:\n    value: dev\n    options:\n      - dev\n      - prod\n    description: 选择构建环境（dev/prod）\n  SONAR_HOST_URL: # SonarQube 主机地址（自定义）\n    value: 'http://10.0.0.100:9000'\n    description: SonarQube主机地址\n  WECHAT_WEBHOOK_URL: # 企业微信webhook地址，用于通知（自定义）\n    value: 'https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=your-webhook-key-here'\n    description: 企业微信webhook地址\n  BUILD_DIR: # 构建目录（自定义）\n    value: app-gen/dist/web/your-app-name\n    description: 构建目录\n  DEPLOY_HOST: # 测试部署主机（一般固定，无需修改）\n    value: 10.0.0.100\n    description: 测试部署主机\n  DEPLOY_DIR: # 测试部署目录（自定义）\n    value: /home/user/nginx/html/\n    description: 测试部署目录\n\ndefault:\n  image: node:${NODE_VERSION}\n  tags:\n    - sonarqube\n\ninclude:\n  - local: .gitlab-dev.yml\n    rules:\n      - if: $CI_PIPELINE_SOURCE == \"push\" && $CI_COMMIT_BRANCH == \"dev\"\n      - if: $CI_PIPELINE_SOURCE == \"web\" && $BUILD_ENV == \"dev\"\n  - local: .gitlab-prod.yml\n    rules:\n      - if: $CI_PIPELINE_SOURCE == \"web\" && $BUILD_ENV == \"prod\"\n\n# 代码检查作业\nlint:\n  stage: lint\n  script:\n    - npm install -g pnpm@${PNPM_VERSION}\n    - pnpm install --frozen-lockfile\n    - pnpm eslint 'app/**/*.{ts,tsx,vue}'\n  artifacts:\n    when: always\n    reports:\n      junit: .eslintcache\n    paths:\n      - .eslintcache\n    expire_in: 1 week\n  rules:\n    - if: $CI_PIPELINE_SOURCE == \"merge_request_event\"\n  allow_failure: true\n\n# SonarQube 代码分析\nsonarqube-check:\n  stage: sonar\n  image: openjdk:11-jre-slim\n  variables:\n    SONAR_PROJECT_KEY: ${CI_PROJECT_ID}\n    SONAR_PROJECT_NAME: ${CI_PROJECT_TITLE}\n    SONAR_PROJECT_VERSION: ${CI_COMMIT_SHORT_SHA}\n    SONAR_USER_HOME: '${CI_PROJECT_DIR}/.sonar'\n    SONAR_SCANNER_VERSION: 4.6.2.2472\n  cache:\n    key: 'sonarqube-${SONAR_SCANNER_VERSION}'\n    paths:\n      - .sonar/cache\n      - sonar-scanner/\n  before_script:\n    - echo \"准备 SonarScanner CLI ${SONAR_SCANNER_VERSION}...\"\n    - |\n      if [ ! -d \"sonar-scanner\" ]; then\n        echo \"下载并安装 SonarScanner CLI...\"\n        apt-get update && apt-get install -y wget unzip\n        wget -O sonar-scanner.zip \"https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-${SONAR_SCANNER_VERSION}-linux.zip\"\n        unzip sonar-scanner.zip\n        mv sonar-scanner-${SONAR_SCANNER_VERSION}-linux sonar-scanner\n      else\n        echo \"使用缓存的 SonarScanner CLI...\"\n      fi\n    - export PATH=\"$PWD/sonar-scanner/bin:$PATH\"\n  script:\n    - echo \"运行测试并生成覆盖率报告...\"\n    - export PATH=\"$PWD/sonar-scanner/bin:$PATH\"\n    - |\n      sonar-scanner \\\n        -Dsonar.projectKey=${SONAR_PROJECT_KEY} \\\n        -Dsonar.projectName=\"${SONAR_PROJECT_NAME}\" \\\n        -Dsonar.projectVersion=${SONAR_PROJECT_VERSION} \\\n        -Dsonar.host.url=${SONAR_HOST_URL} \\\n        -Dsonar.login=${SONAR_TOKEN}\n  allow_failure: true\n  rules:\n    - if: $CI_PIPELINE_SOURCE == \"merge_request_event\"\n\n# 流水线开始通知\nnotify-start:\n  stage: notify_start\n  rules:\n    - if: $CI_PIPELINE_SOURCE == \"merge_request_event\"\n  script:\n    - node scripts/ci/wechat-notify.js --label \"${CI_MERGE_REQUEST_TITLE}\" --type CI-start\n  when: on_success\n\n# 流水线结束通知成功\nnotify-end-success:\n  stage: notify_end\n  rules:\n    - if: $CI_PIPELINE_SOURCE == \"merge_request_event\"\n  script:\n    - node scripts/ci/wechat-notify.js --label \"${CI_MERGE_REQUEST_TITLE}\" --type CI-end --success\n  when: on_success\n\n# 流水线结束通知失败\nnotify-end-failed:\n  stage: notify_end\n  rules:\n    - if: $CI_PIPELINE_SOURCE == \"merge_request_event\"\n  script:\n    - node scripts/ci/wechat-notify.js --label \"${CI_MERGE_REQUEST_TITLE}\" --type CI-end --failed\n  when: on_failure\n","yaml",[323,486,487,493,503,510,525,535,546,554,565,573,586,593,599,607,616,624,632,640,648,656,661,667,675,686,697,709,720,728,739,747,755,763,774,785,802,812,823,837,847,858,868,878,889,899,909,920,930,940,945,953,964,972,980,985,993,1006,1014,1026,1038,1050,1057,1069,1074,1080,1087,1097,1105,1113,1121,1129,1137,1147,1155,1166,1174,1181,1192,1199,1210,1222,1227,1233,1241,1250,1260,1268,1279,1290,1301,1316,1327,1335,1350,1357,1365,1373,1381,1389,1398,1404,1410,1416,1422,1428,1434,1440,1446,1452,1460,1467,1475,1482,1489,1495,1501,1507,1513,1519,1525,1534,1541,1552,1557,1563,1571,1580,1587,1598,1605,1613,1624,1629,1635,1643,1652,1659,1670,1677,1685,1694,1699,1705,1713,1722,1729,1740,1747,1755],{"__ignoreMap":416},[420,488,489],{"class":422,"line":423},[420,490,492],{"class":491},"ss7Ak","# 全局规则：只在指定分支或合并到指定分支的请求中运行\n",[420,494,495,499],{"class":422,"line":429},[420,496,498],{"class":497},"sHsBP","workflow",[420,500,502],{"class":501},"swvn1",":\n",[420,504,505,508],{"class":422,"line":435},[420,506,507],{"class":497},"  rules",[420,509,502],{"class":501},[420,511,512,515,518,521],{"class":422,"line":441},[420,513,514],{"class":501},"    -",[420,516,517],{"class":497}," if",[420,519,520],{"class":501},":",[420,522,524],{"class":523},"sLACW"," $CI_PIPELINE_SOURCE == \"merge_request_event\"\n",[420,526,527,530,532],{"class":422,"line":447},[420,528,529],{"class":497},"      when",[420,531,520],{"class":501},[420,533,534],{"class":523}," always\n",[420,536,537,539,541,543],{"class":422,"line":453},[420,538,514],{"class":501},[420,540,517],{"class":497},[420,542,520],{"class":501},[420,544,545],{"class":523}," $CI_PIPELINE_SOURCE == \"push\" && ($CI_COMMIT_BRANCH == \"dev\" || $CI_COMMIT_BRANCH == \"master\")\n",[420,547,548,550,552],{"class":422,"line":459},[420,549,529],{"class":497},[420,551,520],{"class":501},[420,553,534],{"class":523},[420,555,556,558,560,562],{"class":422,"line":465},[420,557,514],{"class":501},[420,559,517],{"class":497},[420,561,520],{"class":501},[420,563,564],{"class":523}," $CI_PIPELINE_SOURCE == \"web\"\n",[420,566,567,569,571],{"class":422,"line":471},[420,568,529],{"class":497},[420,570,520],{"class":501},[420,572,534],{"class":523},[420,574,576,578,581,583],{"class":422,"line":575},10,[420,577,514],{"class":501},[420,579,580],{"class":497}," when",[420,582,520],{"class":501},[420,584,585],{"class":523}," never\n",[420,587,589],{"class":422,"line":588},11,[420,590,592],{"emptyLinePlaceholder":591},true,"\n",[420,594,596],{"class":422,"line":595},12,[420,597,598],{"class":491},"# 定义流水线的阶段\n",[420,600,602,605],{"class":422,"line":601},13,[420,603,604],{"class":497},"stages",[420,606,502],{"class":501},[420,608,610,613],{"class":422,"line":609},14,[420,611,612],{"class":501},"  -",[420,614,615],{"class":523}," notify_start\n",[420,617,619,621],{"class":422,"line":618},15,[420,620,612],{"class":501},[420,622,623],{"class":523}," lint\n",[420,625,627,629],{"class":422,"line":626},16,[420,628,612],{"class":501},[420,630,631],{"class":523}," sonar\n",[420,633,635,637],{"class":422,"line":634},17,[420,636,612],{"class":501},[420,638,639],{"class":523}," build\n",[420,641,643,645],{"class":422,"line":642},18,[420,644,612],{"class":501},[420,646,647],{"class":523}," deploy\n",[420,649,651,653],{"class":422,"line":650},19,[420,652,612],{"class":501},[420,654,655],{"class":523}," notify_end\n",[420,657,659],{"class":422,"line":658},20,[420,660,592],{"emptyLinePlaceholder":591},[420,662,664],{"class":422,"line":663},21,[420,665,666],{"class":491},"# 定义变量\n",[420,668,670,673],{"class":422,"line":669},22,[420,671,672],{"class":497},"variables",[420,674,502],{"class":501},[420,676,678,681,683],{"class":422,"line":677},23,[420,679,680],{"class":497},"  NODE_VERSION",[420,682,520],{"class":501},[420,684,685],{"class":523}," lts\n",[420,687,689,692,694],{"class":422,"line":688},24,[420,690,691],{"class":497},"  PNPM_VERSION",[420,693,520],{"class":501},[420,695,696],{"class":523}," latest\n",[420,698,700,703,705],{"class":422,"line":699},25,[420,701,702],{"class":497},"  GIT_DEPTH",[420,704,520],{"class":501},[420,706,708],{"class":707},"sYThS"," 0\n",[420,710,712,715,717],{"class":422,"line":711},26,[420,713,714],{"class":497},"  GIT_STRATEGY",[420,716,520],{"class":501},[420,718,719],{"class":523}," clone\n",[420,721,723,726],{"class":422,"line":722},27,[420,724,725],{"class":497},"  BUILD_ENV",[420,727,502],{"class":501},[420,729,731,734,736],{"class":422,"line":730},28,[420,732,733],{"class":497},"    value",[420,735,520],{"class":501},[420,737,738],{"class":523}," dev\n",[420,740,742,745],{"class":422,"line":741},29,[420,743,744],{"class":497},"    options",[420,746,502],{"class":501},[420,748,750,753],{"class":422,"line":749},30,[420,751,752],{"class":501},"      -",[420,754,738],{"class":523},[420,756,758,760],{"class":422,"line":757},31,[420,759,752],{"class":501},[420,761,762],{"class":523}," prod\n",[420,764,766,769,771],{"class":422,"line":765},32,[420,767,768],{"class":497},"    description",[420,770,520],{"class":501},[420,772,773],{"class":523}," 选择构建环境（dev/prod）\n",[420,775,777,780,782],{"class":422,"line":776},33,[420,778,779],{"class":497},"  SONAR_HOST_URL",[420,781,520],{"class":501},[420,783,784],{"class":491}," # SonarQube 主机地址（自定义）\n",[420,786,788,790,792,796,799],{"class":422,"line":787},34,[420,789,733],{"class":497},[420,791,520],{"class":501},[420,793,795],{"class":794},"siCPE"," '",[420,797,798],{"class":523},"http://10.0.0.100:9000",[420,800,801],{"class":794},"'\n",[420,803,805,807,809],{"class":422,"line":804},35,[420,806,768],{"class":497},[420,808,520],{"class":501},[420,810,811],{"class":523}," SonarQube主机地址\n",[420,813,815,818,820],{"class":422,"line":814},36,[420,816,817],{"class":497},"  WECHAT_WEBHOOK_URL",[420,819,520],{"class":501},[420,821,822],{"class":491}," # 企业微信webhook地址，用于通知（自定义）\n",[420,824,826,828,830,832,835],{"class":422,"line":825},37,[420,827,733],{"class":497},[420,829,520],{"class":501},[420,831,795],{"class":794},[420,833,834],{"class":523},"https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=your-webhook-key-here",[420,836,801],{"class":794},[420,838,840,842,844],{"class":422,"line":839},38,[420,841,768],{"class":497},[420,843,520],{"class":501},[420,845,846],{"class":523}," 企业微信webhook地址\n",[420,848,850,853,855],{"class":422,"line":849},39,[420,851,852],{"class":497},"  BUILD_DIR",[420,854,520],{"class":501},[420,856,857],{"class":491}," # 构建目录（自定义）\n",[420,859,861,863,865],{"class":422,"line":860},40,[420,862,733],{"class":497},[420,864,520],{"class":501},[420,866,867],{"class":523}," app-gen/dist/web/your-app-name\n",[420,869,871,873,875],{"class":422,"line":870},41,[420,872,768],{"class":497},[420,874,520],{"class":501},[420,876,877],{"class":523}," 构建目录\n",[420,879,881,884,886],{"class":422,"line":880},42,[420,882,883],{"class":497},"  DEPLOY_HOST",[420,885,520],{"class":501},[420,887,888],{"class":491}," # 测试部署主机（一般固定，无需修改）\n",[420,890,892,894,896],{"class":422,"line":891},43,[420,893,733],{"class":497},[420,895,520],{"class":501},[420,897,898],{"class":707}," 10.0.0.100\n",[420,900,902,904,906],{"class":422,"line":901},44,[420,903,768],{"class":497},[420,905,520],{"class":501},[420,907,908],{"class":523}," 测试部署主机\n",[420,910,912,915,917],{"class":422,"line":911},45,[420,913,914],{"class":497},"  DEPLOY_DIR",[420,916,520],{"class":501},[420,918,919],{"class":491}," # 测试部署目录（自定义）\n",[420,921,923,925,927],{"class":422,"line":922},46,[420,924,733],{"class":497},[420,926,520],{"class":501},[420,928,929],{"class":523}," /home/user/nginx/html/\n",[420,931,933,935,937],{"class":422,"line":932},47,[420,934,768],{"class":497},[420,936,520],{"class":501},[420,938,939],{"class":523}," 测试部署目录\n",[420,941,943],{"class":422,"line":942},48,[420,944,592],{"emptyLinePlaceholder":591},[420,946,948,951],{"class":422,"line":947},49,[420,949,950],{"class":497},"default",[420,952,502],{"class":501},[420,954,956,959,961],{"class":422,"line":955},50,[420,957,958],{"class":497},"  image",[420,960,520],{"class":501},[420,962,963],{"class":523}," node:${NODE_VERSION}\n",[420,965,967,970],{"class":422,"line":966},51,[420,968,969],{"class":497},"  tags",[420,971,502],{"class":501},[420,973,975,977],{"class":422,"line":974},52,[420,976,514],{"class":501},[420,978,979],{"class":523}," sonarqube\n",[420,981,983],{"class":422,"line":982},53,[420,984,592],{"emptyLinePlaceholder":591},[420,986,988,991],{"class":422,"line":987},54,[420,989,990],{"class":497},"include",[420,992,502],{"class":501},[420,994,996,998,1001,1003],{"class":422,"line":995},55,[420,997,612],{"class":501},[420,999,1000],{"class":497}," local",[420,1002,520],{"class":501},[420,1004,1005],{"class":523}," .gitlab-dev.yml\n",[420,1007,1009,1012],{"class":422,"line":1008},56,[420,1010,1011],{"class":497},"    rules",[420,1013,502],{"class":501},[420,1015,1017,1019,1021,1023],{"class":422,"line":1016},57,[420,1018,752],{"class":501},[420,1020,517],{"class":497},[420,1022,520],{"class":501},[420,1024,1025],{"class":523}," $CI_PIPELINE_SOURCE == \"push\" && $CI_COMMIT_BRANCH == \"dev\"\n",[420,1027,1029,1031,1033,1035],{"class":422,"line":1028},58,[420,1030,752],{"class":501},[420,1032,517],{"class":497},[420,1034,520],{"class":501},[420,1036,1037],{"class":523}," $CI_PIPELINE_SOURCE == \"web\" && $BUILD_ENV == \"dev\"\n",[420,1039,1041,1043,1045,1047],{"class":422,"line":1040},59,[420,1042,612],{"class":501},[420,1044,1000],{"class":497},[420,1046,520],{"class":501},[420,1048,1049],{"class":523}," .gitlab-prod.yml\n",[420,1051,1053,1055],{"class":422,"line":1052},60,[420,1054,1011],{"class":497},[420,1056,502],{"class":501},[420,1058,1060,1062,1064,1066],{"class":422,"line":1059},61,[420,1061,752],{"class":501},[420,1063,517],{"class":497},[420,1065,520],{"class":501},[420,1067,1068],{"class":523}," $CI_PIPELINE_SOURCE == \"web\" && $BUILD_ENV == \"prod\"\n",[420,1070,1072],{"class":422,"line":1071},62,[420,1073,592],{"emptyLinePlaceholder":591},[420,1075,1077],{"class":422,"line":1076},63,[420,1078,1079],{"class":491},"# 代码检查作业\n",[420,1081,1083,1085],{"class":422,"line":1082},64,[420,1084,329],{"class":497},[420,1086,502],{"class":501},[420,1088,1090,1093,1095],{"class":422,"line":1089},65,[420,1091,1092],{"class":497},"  stage",[420,1094,520],{"class":501},[420,1096,623],{"class":523},[420,1098,1100,1103],{"class":422,"line":1099},66,[420,1101,1102],{"class":497},"  script",[420,1104,502],{"class":501},[420,1106,1108,1110],{"class":422,"line":1107},67,[420,1109,514],{"class":501},[420,1111,1112],{"class":523}," npm install -g pnpm@${PNPM_VERSION}\n",[420,1114,1116,1118],{"class":422,"line":1115},68,[420,1117,514],{"class":501},[420,1119,1120],{"class":523}," pnpm install --frozen-lockfile\n",[420,1122,1124,1126],{"class":422,"line":1123},69,[420,1125,514],{"class":501},[420,1127,1128],{"class":523}," pnpm eslint 'app/**/*.{ts,tsx,vue}'\n",[420,1130,1132,1135],{"class":422,"line":1131},70,[420,1133,1134],{"class":497},"  artifacts",[420,1136,502],{"class":501},[420,1138,1140,1143,1145],{"class":422,"line":1139},71,[420,1141,1142],{"class":497},"    when",[420,1144,520],{"class":501},[420,1146,534],{"class":523},[420,1148,1150,1153],{"class":422,"line":1149},72,[420,1151,1152],{"class":497},"    reports",[420,1154,502],{"class":501},[420,1156,1158,1161,1163],{"class":422,"line":1157},73,[420,1159,1160],{"class":497},"      junit",[420,1162,520],{"class":501},[420,1164,1165],{"class":523}," .eslintcache\n",[420,1167,1169,1172],{"class":422,"line":1168},74,[420,1170,1171],{"class":497},"    paths",[420,1173,502],{"class":501},[420,1175,1177,1179],{"class":422,"line":1176},75,[420,1178,752],{"class":501},[420,1180,1165],{"class":523},[420,1182,1184,1187,1189],{"class":422,"line":1183},76,[420,1185,1186],{"class":497},"    expire_in",[420,1188,520],{"class":501},[420,1190,1191],{"class":523}," 1 week\n",[420,1193,1195,1197],{"class":422,"line":1194},77,[420,1196,507],{"class":497},[420,1198,502],{"class":501},[420,1200,1202,1204,1206,1208],{"class":422,"line":1201},78,[420,1203,514],{"class":501},[420,1205,517],{"class":497},[420,1207,520],{"class":501},[420,1209,524],{"class":523},[420,1211,1213,1216,1218],{"class":422,"line":1212},79,[420,1214,1215],{"class":497},"  allow_failure",[420,1217,520],{"class":501},[420,1219,1221],{"class":1220},"s8HiA"," true\n",[420,1223,1225],{"class":422,"line":1224},80,[420,1226,592],{"emptyLinePlaceholder":591},[420,1228,1230],{"class":422,"line":1229},81,[420,1231,1232],{"class":491},"# SonarQube 代码分析\n",[420,1234,1236,1239],{"class":422,"line":1235},82,[420,1237,1238],{"class":497},"sonarqube-check",[420,1240,502],{"class":501},[420,1242,1244,1246,1248],{"class":422,"line":1243},83,[420,1245,1092],{"class":497},[420,1247,520],{"class":501},[420,1249,631],{"class":523},[420,1251,1253,1255,1257],{"class":422,"line":1252},84,[420,1254,958],{"class":497},[420,1256,520],{"class":501},[420,1258,1259],{"class":523}," openjdk:11-jre-slim\n",[420,1261,1263,1266],{"class":422,"line":1262},85,[420,1264,1265],{"class":497},"  variables",[420,1267,502],{"class":501},[420,1269,1271,1274,1276],{"class":422,"line":1270},86,[420,1272,1273],{"class":497},"    SONAR_PROJECT_KEY",[420,1275,520],{"class":501},[420,1277,1278],{"class":523}," ${CI_PROJECT_ID}\n",[420,1280,1282,1285,1287],{"class":422,"line":1281},87,[420,1283,1284],{"class":497},"    SONAR_PROJECT_NAME",[420,1286,520],{"class":501},[420,1288,1289],{"class":523}," ${CI_PROJECT_TITLE}\n",[420,1291,1293,1296,1298],{"class":422,"line":1292},88,[420,1294,1295],{"class":497},"    SONAR_PROJECT_VERSION",[420,1297,520],{"class":501},[420,1299,1300],{"class":523}," ${CI_COMMIT_SHORT_SHA}\n",[420,1302,1304,1307,1309,1311,1314],{"class":422,"line":1303},89,[420,1305,1306],{"class":497},"    SONAR_USER_HOME",[420,1308,520],{"class":501},[420,1310,795],{"class":794},[420,1312,1313],{"class":523},"${CI_PROJECT_DIR}/.sonar",[420,1315,801],{"class":794},[420,1317,1319,1322,1324],{"class":422,"line":1318},90,[420,1320,1321],{"class":497},"    SONAR_SCANNER_VERSION",[420,1323,520],{"class":501},[420,1325,1326],{"class":707}," 4.6.2.2472\n",[420,1328,1330,1333],{"class":422,"line":1329},91,[420,1331,1332],{"class":497},"  cache",[420,1334,502],{"class":501},[420,1336,1338,1341,1343,1345,1348],{"class":422,"line":1337},92,[420,1339,1340],{"class":497},"    key",[420,1342,520],{"class":501},[420,1344,795],{"class":794},[420,1346,1347],{"class":523},"sonarqube-${SONAR_SCANNER_VERSION}",[420,1349,801],{"class":794},[420,1351,1353,1355],{"class":422,"line":1352},93,[420,1354,1171],{"class":497},[420,1356,502],{"class":501},[420,1358,1360,1362],{"class":422,"line":1359},94,[420,1361,752],{"class":501},[420,1363,1364],{"class":523}," .sonar/cache\n",[420,1366,1368,1370],{"class":422,"line":1367},95,[420,1369,752],{"class":501},[420,1371,1372],{"class":523}," sonar-scanner/\n",[420,1374,1376,1379],{"class":422,"line":1375},96,[420,1377,1378],{"class":497},"  before_script",[420,1380,502],{"class":501},[420,1382,1384,1386],{"class":422,"line":1383},97,[420,1385,514],{"class":501},[420,1387,1388],{"class":523}," echo \"准备 SonarScanner CLI ${SONAR_SCANNER_VERSION}...\"\n",[420,1390,1392,1394],{"class":422,"line":1391},98,[420,1393,514],{"class":501},[420,1395,1397],{"class":1396},"sRxSC"," |\n",[420,1399,1401],{"class":422,"line":1400},99,[420,1402,1403],{"class":523},"      if [ ! -d \"sonar-scanner\" ]; then\n",[420,1405,1407],{"class":422,"line":1406},100,[420,1408,1409],{"class":523},"        echo \"下载并安装 SonarScanner CLI...\"\n",[420,1411,1413],{"class":422,"line":1412},101,[420,1414,1415],{"class":523},"        apt-get update && apt-get install -y wget unzip\n",[420,1417,1419],{"class":422,"line":1418},102,[420,1420,1421],{"class":523},"        wget -O sonar-scanner.zip \"https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-${SONAR_SCANNER_VERSION}-linux.zip\"\n",[420,1423,1425],{"class":422,"line":1424},103,[420,1426,1427],{"class":523},"        unzip sonar-scanner.zip\n",[420,1429,1431],{"class":422,"line":1430},104,[420,1432,1433],{"class":523},"        mv sonar-scanner-${SONAR_SCANNER_VERSION}-linux sonar-scanner\n",[420,1435,1437],{"class":422,"line":1436},105,[420,1438,1439],{"class":523},"      else\n",[420,1441,1443],{"class":422,"line":1442},106,[420,1444,1445],{"class":523},"        echo \"使用缓存的 SonarScanner CLI...\"\n",[420,1447,1449],{"class":422,"line":1448},107,[420,1450,1451],{"class":523},"      fi\n",[420,1453,1455,1457],{"class":422,"line":1454},108,[420,1456,514],{"class":501},[420,1458,1459],{"class":523}," export PATH=\"$PWD/sonar-scanner/bin:$PATH\"\n",[420,1461,1463,1465],{"class":422,"line":1462},109,[420,1464,1102],{"class":497},[420,1466,502],{"class":501},[420,1468,1470,1472],{"class":422,"line":1469},110,[420,1471,514],{"class":501},[420,1473,1474],{"class":523}," echo \"运行测试并生成覆盖率报告...\"\n",[420,1476,1478,1480],{"class":422,"line":1477},111,[420,1479,514],{"class":501},[420,1481,1459],{"class":523},[420,1483,1485,1487],{"class":422,"line":1484},112,[420,1486,514],{"class":501},[420,1488,1397],{"class":1396},[420,1490,1492],{"class":422,"line":1491},113,[420,1493,1494],{"class":523},"      sonar-scanner \\\n",[420,1496,1498],{"class":422,"line":1497},114,[420,1499,1500],{"class":523},"        -Dsonar.projectKey=${SONAR_PROJECT_KEY} \\\n",[420,1502,1504],{"class":422,"line":1503},115,[420,1505,1506],{"class":523},"        -Dsonar.projectName=\"${SONAR_PROJECT_NAME}\" \\\n",[420,1508,1510],{"class":422,"line":1509},116,[420,1511,1512],{"class":523},"        -Dsonar.projectVersion=${SONAR_PROJECT_VERSION} \\\n",[420,1514,1516],{"class":422,"line":1515},117,[420,1517,1518],{"class":523},"        -Dsonar.host.url=${SONAR_HOST_URL} \\\n",[420,1520,1522],{"class":422,"line":1521},118,[420,1523,1524],{"class":523},"        -Dsonar.login=${SONAR_TOKEN}\n",[420,1526,1528,1530,1532],{"class":422,"line":1527},119,[420,1529,1215],{"class":497},[420,1531,520],{"class":501},[420,1533,1221],{"class":1220},[420,1535,1537,1539],{"class":422,"line":1536},120,[420,1538,507],{"class":497},[420,1540,502],{"class":501},[420,1542,1544,1546,1548,1550],{"class":422,"line":1543},121,[420,1545,514],{"class":501},[420,1547,517],{"class":497},[420,1549,520],{"class":501},[420,1551,524],{"class":523},[420,1553,1555],{"class":422,"line":1554},122,[420,1556,592],{"emptyLinePlaceholder":591},[420,1558,1560],{"class":422,"line":1559},123,[420,1561,1562],{"class":491},"# 流水线开始通知\n",[420,1564,1566,1569],{"class":422,"line":1565},124,[420,1567,1568],{"class":497},"notify-start",[420,1570,502],{"class":501},[420,1572,1574,1576,1578],{"class":422,"line":1573},125,[420,1575,1092],{"class":497},[420,1577,520],{"class":501},[420,1579,615],{"class":523},[420,1581,1583,1585],{"class":422,"line":1582},126,[420,1584,507],{"class":497},[420,1586,502],{"class":501},[420,1588,1590,1592,1594,1596],{"class":422,"line":1589},127,[420,1591,514],{"class":501},[420,1593,517],{"class":497},[420,1595,520],{"class":501},[420,1597,524],{"class":523},[420,1599,1601,1603],{"class":422,"line":1600},128,[420,1602,1102],{"class":497},[420,1604,502],{"class":501},[420,1606,1608,1610],{"class":422,"line":1607},129,[420,1609,514],{"class":501},[420,1611,1612],{"class":523}," node scripts/ci/wechat-notify.js --label \"${CI_MERGE_REQUEST_TITLE}\" --type CI-start\n",[420,1614,1616,1619,1621],{"class":422,"line":1615},130,[420,1617,1618],{"class":497},"  when",[420,1620,520],{"class":501},[420,1622,1623],{"class":523}," on_success\n",[420,1625,1627],{"class":422,"line":1626},131,[420,1628,592],{"emptyLinePlaceholder":591},[420,1630,1632],{"class":422,"line":1631},132,[420,1633,1634],{"class":491},"# 流水线结束通知成功\n",[420,1636,1638,1641],{"class":422,"line":1637},133,[420,1639,1640],{"class":497},"notify-end-success",[420,1642,502],{"class":501},[420,1644,1646,1648,1650],{"class":422,"line":1645},134,[420,1647,1092],{"class":497},[420,1649,520],{"class":501},[420,1651,655],{"class":523},[420,1653,1655,1657],{"class":422,"line":1654},135,[420,1656,507],{"class":497},[420,1658,502],{"class":501},[420,1660,1662,1664,1666,1668],{"class":422,"line":1661},136,[420,1663,514],{"class":501},[420,1665,517],{"class":497},[420,1667,520],{"class":501},[420,1669,524],{"class":523},[420,1671,1673,1675],{"class":422,"line":1672},137,[420,1674,1102],{"class":497},[420,1676,502],{"class":501},[420,1678,1680,1682],{"class":422,"line":1679},138,[420,1681,514],{"class":501},[420,1683,1684],{"class":523}," node scripts/ci/wechat-notify.js --label \"${CI_MERGE_REQUEST_TITLE}\" --type CI-end --success\n",[420,1686,1688,1690,1692],{"class":422,"line":1687},139,[420,1689,1618],{"class":497},[420,1691,520],{"class":501},[420,1693,1623],{"class":523},[420,1695,1697],{"class":422,"line":1696},140,[420,1698,592],{"emptyLinePlaceholder":591},[420,1700,1702],{"class":422,"line":1701},141,[420,1703,1704],{"class":491},"# 流水线结束通知失败\n",[420,1706,1708,1711],{"class":422,"line":1707},142,[420,1709,1710],{"class":497},"notify-end-failed",[420,1712,502],{"class":501},[420,1714,1716,1718,1720],{"class":422,"line":1715},143,[420,1717,1092],{"class":497},[420,1719,520],{"class":501},[420,1721,655],{"class":523},[420,1723,1725,1727],{"class":422,"line":1724},144,[420,1726,507],{"class":497},[420,1728,502],{"class":501},[420,1730,1732,1734,1736,1738],{"class":422,"line":1731},145,[420,1733,514],{"class":501},[420,1735,517],{"class":497},[420,1737,520],{"class":501},[420,1739,524],{"class":523},[420,1741,1743,1745],{"class":422,"line":1742},146,[420,1744,1102],{"class":497},[420,1746,502],{"class":501},[420,1748,1750,1752],{"class":422,"line":1749},147,[420,1751,514],{"class":501},[420,1753,1754],{"class":523}," node scripts/ci/wechat-notify.js --label \"${CI_MERGE_REQUEST_TITLE}\" --type CI-end --failed\n",[420,1756,1758,1760,1762],{"class":422,"line":1757},148,[420,1759,1618],{"class":497},[420,1761,520],{"class":501},[420,1763,1764],{"class":523}," on_failure\n",[411,1766,1769],{"className":482,"code":1767,"filename":1768,"language":484,"meta":416,"style":416},"# dev 环境作业定义（通过根 .gitlab-ci.yml 的 include.rules 条件加载）\n\n# 构建作业\nbuild:\n  stage: build\n  before_script:\n    - npm install -g pnpm@${PNPM_VERSION}\n    - pnpm install --frozen-lockfile\n    - pnpm run build:dev\n  script:\n    - bash scripts/ci/package-zip.sh\n  artifacts:\n    paths:\n      - '*.zip'\n    reports:\n      dotenv: zip.env\n    expire_in: 1 week\n\n# 部署作业\ndeploy:\n  stage: deploy\n  needs:\n    - job: build\n      artifacts: true\n  variables:\n    DEPLOY_PORT: 22\n    DEPLOY_USER: root\n    DEPLOY_PASSWORD: your-password-here\n  script:\n    - bash scripts/ci/deploy-zip.sh\n  when: on_success\n\nnotify-deploy-start:\n  stage: notify_start\n  script:\n    - node scripts/ci/wechat-notify.js --label \"测试环境部署开始\" --type deploy-start\n  when: on_success\n\nnotify-deploy-end-success:\n  stage: notify_end\n  needs:\n    - job: build\n      artifacts: true\n    - job: deploy\n  script:\n    - node scripts/ci/wechat-notify.js --label \"测试环境部署 \u003Cfont color=\\\"info\\\">成功\u003C/font> 🎉\" --type deploy-end\n  when: on_success\n\nnotify-deploy-end-failed:\n  stage: notify_end\n  script:\n    - node scripts/ci/wechat-notify.js --label \"测试环境部署 \u003Cfont color=\\\"warning\\\">失败\u003C/font> 😭\" --type deploy-end\n  when: on_failure\n",".gitlab-dev.yml",[323,1770,1771,1776,1780,1785,1791,1799,1805,1811,1817,1824,1830,1837,1843,1849,1860,1866,1876,1884,1888,1893,1899,1907,1914,1925,1934,1940,1950,1960,1970,1976,1983,1991,1995,2002,2010,2016,2023,2031,2035,2042,2050,2056,2066,2074,2084,2090,2097,2105,2109,2116,2124,2130,2137],{"__ignoreMap":416},[420,1772,1773],{"class":422,"line":423},[420,1774,1775],{"class":491},"# dev 环境作业定义（通过根 .gitlab-ci.yml 的 include.rules 条件加载）\n",[420,1777,1778],{"class":422,"line":429},[420,1779,592],{"emptyLinePlaceholder":591},[420,1781,1782],{"class":422,"line":435},[420,1783,1784],{"class":491},"# 构建作业\n",[420,1786,1787,1789],{"class":422,"line":441},[420,1788,335],{"class":497},[420,1790,502],{"class":501},[420,1792,1793,1795,1797],{"class":422,"line":447},[420,1794,1092],{"class":497},[420,1796,520],{"class":501},[420,1798,639],{"class":523},[420,1800,1801,1803],{"class":422,"line":453},[420,1802,1378],{"class":497},[420,1804,502],{"class":501},[420,1806,1807,1809],{"class":422,"line":459},[420,1808,514],{"class":501},[420,1810,1112],{"class":523},[420,1812,1813,1815],{"class":422,"line":465},[420,1814,514],{"class":501},[420,1816,1120],{"class":523},[420,1818,1819,1821],{"class":422,"line":471},[420,1820,514],{"class":501},[420,1822,1823],{"class":523}," pnpm run build:dev\n",[420,1825,1826,1828],{"class":422,"line":575},[420,1827,1102],{"class":497},[420,1829,502],{"class":501},[420,1831,1832,1834],{"class":422,"line":588},[420,1833,514],{"class":501},[420,1835,1836],{"class":523}," bash scripts/ci/package-zip.sh\n",[420,1838,1839,1841],{"class":422,"line":595},[420,1840,1134],{"class":497},[420,1842,502],{"class":501},[420,1844,1845,1847],{"class":422,"line":601},[420,1846,1171],{"class":497},[420,1848,502],{"class":501},[420,1850,1851,1853,1855,1858],{"class":422,"line":609},[420,1852,752],{"class":501},[420,1854,795],{"class":794},[420,1856,1857],{"class":523},"*.zip",[420,1859,801],{"class":794},[420,1861,1862,1864],{"class":422,"line":618},[420,1863,1152],{"class":497},[420,1865,502],{"class":501},[420,1867,1868,1871,1873],{"class":422,"line":626},[420,1869,1870],{"class":497},"      dotenv",[420,1872,520],{"class":501},[420,1874,1875],{"class":523}," zip.env\n",[420,1877,1878,1880,1882],{"class":422,"line":634},[420,1879,1186],{"class":497},[420,1881,520],{"class":501},[420,1883,1191],{"class":523},[420,1885,1886],{"class":422,"line":642},[420,1887,592],{"emptyLinePlaceholder":591},[420,1889,1890],{"class":422,"line":650},[420,1891,1892],{"class":491},"# 部署作业\n",[420,1894,1895,1897],{"class":422,"line":658},[420,1896,338],{"class":497},[420,1898,502],{"class":501},[420,1900,1901,1903,1905],{"class":422,"line":663},[420,1902,1092],{"class":497},[420,1904,520],{"class":501},[420,1906,647],{"class":523},[420,1908,1909,1912],{"class":422,"line":669},[420,1910,1911],{"class":497},"  needs",[420,1913,502],{"class":501},[420,1915,1916,1918,1921,1923],{"class":422,"line":677},[420,1917,514],{"class":501},[420,1919,1920],{"class":497}," job",[420,1922,520],{"class":501},[420,1924,639],{"class":523},[420,1926,1927,1930,1932],{"class":422,"line":688},[420,1928,1929],{"class":497},"      artifacts",[420,1931,520],{"class":501},[420,1933,1221],{"class":1220},[420,1935,1936,1938],{"class":422,"line":699},[420,1937,1265],{"class":497},[420,1939,502],{"class":501},[420,1941,1942,1945,1947],{"class":422,"line":711},[420,1943,1944],{"class":497},"    DEPLOY_PORT",[420,1946,520],{"class":501},[420,1948,1949],{"class":707}," 22\n",[420,1951,1952,1955,1957],{"class":422,"line":722},[420,1953,1954],{"class":497},"    DEPLOY_USER",[420,1956,520],{"class":501},[420,1958,1959],{"class":523}," root\n",[420,1961,1962,1965,1967],{"class":422,"line":730},[420,1963,1964],{"class":497},"    DEPLOY_PASSWORD",[420,1966,520],{"class":501},[420,1968,1969],{"class":523}," your-password-here\n",[420,1971,1972,1974],{"class":422,"line":741},[420,1973,1102],{"class":497},[420,1975,502],{"class":501},[420,1977,1978,1980],{"class":422,"line":749},[420,1979,514],{"class":501},[420,1981,1982],{"class":523}," bash scripts/ci/deploy-zip.sh\n",[420,1984,1985,1987,1989],{"class":422,"line":757},[420,1986,1618],{"class":497},[420,1988,520],{"class":501},[420,1990,1623],{"class":523},[420,1992,1993],{"class":422,"line":765},[420,1994,592],{"emptyLinePlaceholder":591},[420,1996,1997,2000],{"class":422,"line":776},[420,1998,1999],{"class":497},"notify-deploy-start",[420,2001,502],{"class":501},[420,2003,2004,2006,2008],{"class":422,"line":787},[420,2005,1092],{"class":497},[420,2007,520],{"class":501},[420,2009,615],{"class":523},[420,2011,2012,2014],{"class":422,"line":804},[420,2013,1102],{"class":497},[420,2015,502],{"class":501},[420,2017,2018,2020],{"class":422,"line":814},[420,2019,514],{"class":501},[420,2021,2022],{"class":523}," node scripts/ci/wechat-notify.js --label \"测试环境部署开始\" --type deploy-start\n",[420,2024,2025,2027,2029],{"class":422,"line":825},[420,2026,1618],{"class":497},[420,2028,520],{"class":501},[420,2030,1623],{"class":523},[420,2032,2033],{"class":422,"line":839},[420,2034,592],{"emptyLinePlaceholder":591},[420,2036,2037,2040],{"class":422,"line":849},[420,2038,2039],{"class":497},"notify-deploy-end-success",[420,2041,502],{"class":501},[420,2043,2044,2046,2048],{"class":422,"line":860},[420,2045,1092],{"class":497},[420,2047,520],{"class":501},[420,2049,655],{"class":523},[420,2051,2052,2054],{"class":422,"line":870},[420,2053,1911],{"class":497},[420,2055,502],{"class":501},[420,2057,2058,2060,2062,2064],{"class":422,"line":880},[420,2059,514],{"class":501},[420,2061,1920],{"class":497},[420,2063,520],{"class":501},[420,2065,639],{"class":523},[420,2067,2068,2070,2072],{"class":422,"line":891},[420,2069,1929],{"class":497},[420,2071,520],{"class":501},[420,2073,1221],{"class":1220},[420,2075,2076,2078,2080,2082],{"class":422,"line":901},[420,2077,514],{"class":501},[420,2079,1920],{"class":497},[420,2081,520],{"class":501},[420,2083,647],{"class":523},[420,2085,2086,2088],{"class":422,"line":911},[420,2087,1102],{"class":497},[420,2089,502],{"class":501},[420,2091,2092,2094],{"class":422,"line":922},[420,2093,514],{"class":501},[420,2095,2096],{"class":523}," node scripts/ci/wechat-notify.js --label \"测试环境部署 \u003Cfont color=\\\"info\\\">成功\u003C/font> 🎉\" --type deploy-end\n",[420,2098,2099,2101,2103],{"class":422,"line":932},[420,2100,1618],{"class":497},[420,2102,520],{"class":501},[420,2104,1623],{"class":523},[420,2106,2107],{"class":422,"line":942},[420,2108,592],{"emptyLinePlaceholder":591},[420,2110,2111,2114],{"class":422,"line":947},[420,2112,2113],{"class":497},"notify-deploy-end-failed",[420,2115,502],{"class":501},[420,2117,2118,2120,2122],{"class":422,"line":955},[420,2119,1092],{"class":497},[420,2121,520],{"class":501},[420,2123,655],{"class":523},[420,2125,2126,2128],{"class":422,"line":966},[420,2127,1102],{"class":497},[420,2129,502],{"class":501},[420,2131,2132,2134],{"class":422,"line":974},[420,2133,514],{"class":501},[420,2135,2136],{"class":523}," node scripts/ci/wechat-notify.js --label \"测试环境部署 \u003Cfont color=\\\"warning\\\">失败\u003C/font> 😭\" --type deploy-end\n",[420,2138,2139,2141,2143],{"class":422,"line":982},[420,2140,1618],{"class":497},[420,2142,520],{"class":501},[420,2144,1764],{"class":523},[411,2146,2149],{"className":482,"code":2147,"filename":2148,"language":484,"meta":416,"style":416},"# prod 环境作业定义（通过根 .gitlab-ci.yml 的 include.rules 条件加载）\n\n# 构建作业\nbuild:\n  stage: build\n  before_script:\n    - npm install -g pnpm@${PNPM_VERSION}\n    - pnpm install --frozen-lockfile\n    - pnpm run build\n  script:\n    - bash scripts/ci/package-zip.sh\n  artifacts:\n    paths:\n      - '*.zip'\n    reports:\n      dotenv: zip.env\n    expire_in: 1 week\n\nnotify-deploy-start:\n  stage: notify_start\n  script:\n    - node scripts/ci/wechat-notify.js --label \"正式环境打包开始\" --type deploy:prod-start\n  when: on_success\n\nnotify-deploy-end-success:\n  stage: notify_end\n  needs:\n    - job: build\n      artifacts: true\n  script:\n    - node scripts/ci/wechat-notify.js --label \"正式环境打包 \u003Cfont color=\\\"info\\\">成功\u003C/font> 🎉\" --type deploy:prod-end\n  when: on_success\n\nnotify-deploy-end-failed:\n  stage: notify_end\n  script:\n    - node scripts/ci/wechat-notify.js --label \"正式环境打包 \u003Cfont color=\\\"warning\\\">失败\u003C/font> 😭\" --type deploy:prod-end\n  when: on_failure\n",".gitlab-prod.yml",[323,2150,2151,2156,2160,2164,2170,2178,2184,2190,2196,2203,2209,2215,2221,2227,2237,2243,2251,2259,2263,2269,2277,2283,2290,2298,2302,2308,2316,2322,2332,2340,2346,2353,2361,2365,2371,2379,2385,2392],{"__ignoreMap":416},[420,2152,2153],{"class":422,"line":423},[420,2154,2155],{"class":491},"# prod 环境作业定义（通过根 .gitlab-ci.yml 的 include.rules 条件加载）\n",[420,2157,2158],{"class":422,"line":429},[420,2159,592],{"emptyLinePlaceholder":591},[420,2161,2162],{"class":422,"line":435},[420,2163,1784],{"class":491},[420,2165,2166,2168],{"class":422,"line":441},[420,2167,335],{"class":497},[420,2169,502],{"class":501},[420,2171,2172,2174,2176],{"class":422,"line":447},[420,2173,1092],{"class":497},[420,2175,520],{"class":501},[420,2177,639],{"class":523},[420,2179,2180,2182],{"class":422,"line":453},[420,2181,1378],{"class":497},[420,2183,502],{"class":501},[420,2185,2186,2188],{"class":422,"line":459},[420,2187,514],{"class":501},[420,2189,1112],{"class":523},[420,2191,2192,2194],{"class":422,"line":465},[420,2193,514],{"class":501},[420,2195,1120],{"class":523},[420,2197,2198,2200],{"class":422,"line":471},[420,2199,514],{"class":501},[420,2201,2202],{"class":523}," pnpm run build\n",[420,2204,2205,2207],{"class":422,"line":575},[420,2206,1102],{"class":497},[420,2208,502],{"class":501},[420,2210,2211,2213],{"class":422,"line":588},[420,2212,514],{"class":501},[420,2214,1836],{"class":523},[420,2216,2217,2219],{"class":422,"line":595},[420,2218,1134],{"class":497},[420,2220,502],{"class":501},[420,2222,2223,2225],{"class":422,"line":601},[420,2224,1171],{"class":497},[420,2226,502],{"class":501},[420,2228,2229,2231,2233,2235],{"class":422,"line":609},[420,2230,752],{"class":501},[420,2232,795],{"class":794},[420,2234,1857],{"class":523},[420,2236,801],{"class":794},[420,2238,2239,2241],{"class":422,"line":618},[420,2240,1152],{"class":497},[420,2242,502],{"class":501},[420,2244,2245,2247,2249],{"class":422,"line":626},[420,2246,1870],{"class":497},[420,2248,520],{"class":501},[420,2250,1875],{"class":523},[420,2252,2253,2255,2257],{"class":422,"line":634},[420,2254,1186],{"class":497},[420,2256,520],{"class":501},[420,2258,1191],{"class":523},[420,2260,2261],{"class":422,"line":642},[420,2262,592],{"emptyLinePlaceholder":591},[420,2264,2265,2267],{"class":422,"line":650},[420,2266,1999],{"class":497},[420,2268,502],{"class":501},[420,2270,2271,2273,2275],{"class":422,"line":658},[420,2272,1092],{"class":497},[420,2274,520],{"class":501},[420,2276,615],{"class":523},[420,2278,2279,2281],{"class":422,"line":663},[420,2280,1102],{"class":497},[420,2282,502],{"class":501},[420,2284,2285,2287],{"class":422,"line":669},[420,2286,514],{"class":501},[420,2288,2289],{"class":523}," node scripts/ci/wechat-notify.js --label \"正式环境打包开始\" --type deploy:prod-start\n",[420,2291,2292,2294,2296],{"class":422,"line":677},[420,2293,1618],{"class":497},[420,2295,520],{"class":501},[420,2297,1623],{"class":523},[420,2299,2300],{"class":422,"line":688},[420,2301,592],{"emptyLinePlaceholder":591},[420,2303,2304,2306],{"class":422,"line":699},[420,2305,2039],{"class":497},[420,2307,502],{"class":501},[420,2309,2310,2312,2314],{"class":422,"line":711},[420,2311,1092],{"class":497},[420,2313,520],{"class":501},[420,2315,655],{"class":523},[420,2317,2318,2320],{"class":422,"line":722},[420,2319,1911],{"class":497},[420,2321,502],{"class":501},[420,2323,2324,2326,2328,2330],{"class":422,"line":730},[420,2325,514],{"class":501},[420,2327,1920],{"class":497},[420,2329,520],{"class":501},[420,2331,639],{"class":523},[420,2333,2334,2336,2338],{"class":422,"line":741},[420,2335,1929],{"class":497},[420,2337,520],{"class":501},[420,2339,1221],{"class":1220},[420,2341,2342,2344],{"class":422,"line":749},[420,2343,1102],{"class":497},[420,2345,502],{"class":501},[420,2347,2348,2350],{"class":422,"line":757},[420,2349,514],{"class":501},[420,2351,2352],{"class":523}," node scripts/ci/wechat-notify.js --label \"正式环境打包 \u003Cfont color=\\\"info\\\">成功\u003C/font> 🎉\" --type deploy:prod-end\n",[420,2354,2355,2357,2359],{"class":422,"line":765},[420,2356,1618],{"class":497},[420,2358,520],{"class":501},[420,2360,1623],{"class":523},[420,2362,2363],{"class":422,"line":776},[420,2364,592],{"emptyLinePlaceholder":591},[420,2366,2367,2369],{"class":422,"line":787},[420,2368,2113],{"class":497},[420,2370,502],{"class":501},[420,2372,2373,2375,2377],{"class":422,"line":804},[420,2374,1092],{"class":497},[420,2376,520],{"class":501},[420,2378,655],{"class":523},[420,2380,2381,2383],{"class":422,"line":814},[420,2382,1102],{"class":497},[420,2384,502],{"class":501},[420,2386,2387,2389],{"class":422,"line":825},[420,2388,514],{"class":501},[420,2390,2391],{"class":523}," node scripts/ci/wechat-notify.js --label \"正式环境打包 \u003Cfont color=\\\"warning\\\">失败\u003C/font> 😭\" --type deploy:prod-end\n",[420,2393,2394,2396,2398],{"class":422,"line":839},[420,2395,1618],{"class":497},[420,2397,520],{"class":501},[420,2399,1764],{"class":523},[411,2401,2406],{"className":2402,"code":2403,"filename":2404,"language":2405,"meta":416,"style":416},"language-sh shiki shiki-themes material-theme-lighter github-light github-dark monokai","#!/usr/bin/env bash\nset -euo pipefail\n\n# required envs\nfor v in CI_PROJECT_DIR DEPLOY_HOST DEPLOY_DIR DEPLOY_USER DEPLOY_PASSWORD; do\n  if [ -z \"${!v:-}\" ]; then\n    echo \"[deploy-zip] missing env: $v\" >&2\n    exit 1\n  fi\ndone\n\nDEPLOY_PORT=\"${DEPLOY_PORT:-22}\"\n\n# determine zip file\nif [ -z \"${ZIP_FILE:-}\" ]; then\n  if [ -z \"${BUILD_DIR:-}\" ]; then\n    echo \"[deploy-zip] ZIP_FILE and BUILD_DIR both unset\" >&2\n    exit 1\n  fi\n  ZIP_BASENAME=\"$(basename \"$BUILD_DIR\")\"\n  ZIP_FILE=\"${ZIP_BASENAME}.zip\"\nfi\n\ncd \"$CI_PROJECT_DIR\"\nif [ ! -f \"$ZIP_FILE\" ]; then\n  echo \"[deploy-zip] ZIP_FILE not found: $ZIP_FILE\" >&2\n  ls -la\n  exit 1\nfi\n\n# askpass for non-interactive ssh/scp\nmkdir -p /tmp\necho '#!/bin/sh' > /tmp/askpass.sh && echo 'echo \"$DEPLOY_PASSWORD\"' >> /tmp/askpass.sh && chmod +x /tmp/askpass.sh\nexport SSH_ASKPASS=/tmp/askpass.sh\nexport DISPLAY=:0\n\nSSH_OPTS=\"-p ${DEPLOY_PORT} -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o BatchMode=no\"\n\n# ensure remote dir exists\nsetsid ssh $SSH_OPTS \"${DEPLOY_USER}@${DEPLOY_HOST}\" \"mkdir -p '${DEPLOY_DIR}'\"\n\n# upload zip\nsetsid scp -P \"${DEPLOY_PORT}\" -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o BatchMode=no \\\n  \"$ZIP_FILE\" \"${DEPLOY_USER}@${DEPLOY_HOST}:${DEPLOY_DIR}/\"\n\n# unzip remotely and optional cleanup\nsetsid ssh $SSH_OPTS \"${DEPLOY_USER}@${DEPLOY_HOST}\" \\\n  \"cd '${DEPLOY_DIR}' && (command -v unzip >/dev/null 2>&1 || (apt-get update && apt-get install -y unzip || yum install -y unzip || true)) && unzip -o '${ZIP_FILE}' -d '${DEPLOY_DIR}' && rm -f '${ZIP_FILE}'\"\n\necho \"[deploy-zip] deployed $ZIP_FILE to ${DEPLOY_USER}@${DEPLOY_HOST}:${DEPLOY_DIR}\"\n","scripts/ci/deploy-zip.sh","sh",[323,2407,2408,2413,2426,2430,2435,2468,2501,2521,2529,2534,2539,2543,2564,2568,2573,2595,2616,2629,2635,2639,2661,2682,2687,2691,2703,2726,2742,2750,2757,2761,2765,2770,2781,2829,2843,2855,2859,2883,2887,2892,2936,2940,2945,2981,3017,3021,3026,3050,3094,3098],{"__ignoreMap":416},[420,2409,2410],{"class":422,"line":423},[420,2411,2412],{"class":491},"#!/usr/bin/env bash\n",[420,2414,2415,2419,2423],{"class":422,"line":429},[420,2416,2418],{"class":2417},"sMLJd","set",[420,2420,2422],{"class":2421},"sFhLe"," -euo",[420,2424,2425],{"class":523}," pipefail\n",[420,2427,2428],{"class":422,"line":435},[420,2429,592],{"emptyLinePlaceholder":591},[420,2431,2432],{"class":422,"line":441},[420,2433,2434],{"class":491},"# required envs\n",[420,2436,2437,2440,2444,2447,2450,2453,2456,2459,2462,2465],{"class":422,"line":447},[420,2438,2439],{"class":1396},"for",[420,2441,2443],{"class":2442},"ss--_"," v ",[420,2445,2446],{"class":1396},"in",[420,2448,2449],{"class":523}," CI_PROJECT_DIR",[420,2451,2452],{"class":523}," DEPLOY_HOST",[420,2454,2455],{"class":523}," DEPLOY_DIR",[420,2457,2458],{"class":523}," DEPLOY_USER",[420,2460,2461],{"class":523}," DEPLOY_PASSWORD",[420,2463,2464],{"class":501},";",[420,2466,2467],{"class":1396}," do\n",[420,2469,2470,2473,2476,2480,2483,2486,2489,2492,2495,2498],{"class":422,"line":453},[420,2471,2472],{"class":1396},"  if",[420,2474,2475],{"class":501}," [",[420,2477,2479],{"class":2478},"sGXK2"," -z",[420,2481,2482],{"class":794}," \"${",[420,2484,2485],{"class":2478},"!",[420,2487,2488],{"class":2442},"v",[420,2490,2491],{"class":2478},":-",[420,2493,2494],{"class":794},"}\"",[420,2496,2497],{"class":501}," ];",[420,2499,2500],{"class":1396}," then\n",[420,2502,2503,2506,2509,2512,2515,2518],{"class":422,"line":459},[420,2504,2505],{"class":2417},"    echo",[420,2507,2508],{"class":794}," \"",[420,2510,2511],{"class":523},"[deploy-zip] missing env: ",[420,2513,2514],{"class":2442},"$v",[420,2516,2517],{"class":794},"\"",[420,2519,2520],{"class":2478}," >&2\n",[420,2522,2523,2526],{"class":422,"line":465},[420,2524,2525],{"class":2417},"    exit",[420,2527,2528],{"class":707}," 1\n",[420,2530,2531],{"class":422,"line":471},[420,2532,2533],{"class":1396},"  fi\n",[420,2535,2536],{"class":422,"line":575},[420,2537,2538],{"class":1396},"done\n",[420,2540,2541],{"class":422,"line":588},[420,2542,592],{"emptyLinePlaceholder":591},[420,2544,2545,2548,2551,2554,2556,2558,2561],{"class":422,"line":595},[420,2546,2547],{"class":2442},"DEPLOY_PORT",[420,2549,2550],{"class":2478},"=",[420,2552,2553],{"class":794},"\"${",[420,2555,2547],{"class":2442},[420,2557,2491],{"class":2478},[420,2559,2560],{"class":2442},"22",[420,2562,2563],{"class":794},"}\"\n",[420,2565,2566],{"class":422,"line":601},[420,2567,592],{"emptyLinePlaceholder":591},[420,2569,2570],{"class":422,"line":609},[420,2571,2572],{"class":491},"# determine zip file\n",[420,2574,2575,2578,2580,2582,2584,2587,2589,2591,2593],{"class":422,"line":618},[420,2576,2577],{"class":1396},"if",[420,2579,2475],{"class":501},[420,2581,2479],{"class":2478},[420,2583,2482],{"class":794},[420,2585,2586],{"class":2442},"ZIP_FILE",[420,2588,2491],{"class":2478},[420,2590,2494],{"class":794},[420,2592,2497],{"class":501},[420,2594,2500],{"class":1396},[420,2596,2597,2599,2601,2603,2605,2608,2610,2612,2614],{"class":422,"line":626},[420,2598,2472],{"class":1396},[420,2600,2475],{"class":501},[420,2602,2479],{"class":2478},[420,2604,2482],{"class":794},[420,2606,2607],{"class":2442},"BUILD_DIR",[420,2609,2491],{"class":2478},[420,2611,2494],{"class":794},[420,2613,2497],{"class":501},[420,2615,2500],{"class":1396},[420,2617,2618,2620,2622,2625,2627],{"class":422,"line":634},[420,2619,2505],{"class":2417},[420,2621,2508],{"class":794},[420,2623,2624],{"class":523},"[deploy-zip] ZIP_FILE and BUILD_DIR both unset",[420,2626,2517],{"class":794},[420,2628,2520],{"class":2478},[420,2630,2631,2633],{"class":422,"line":642},[420,2632,2525],{"class":2417},[420,2634,2528],{"class":707},[420,2636,2637],{"class":422,"line":650},[420,2638,2533],{"class":1396},[420,2640,2641,2644,2646,2649,2653,2655,2658],{"class":422,"line":658},[420,2642,2643],{"class":2442},"  ZIP_BASENAME",[420,2645,2550],{"class":2478},[420,2647,2648],{"class":794},"\"$(",[420,2650,2652],{"class":2651},"sR7ES","basename",[420,2654,2508],{"class":794},[420,2656,2657],{"class":2442},"$BUILD_DIR",[420,2659,2660],{"class":794},"\")\"\n",[420,2662,2663,2666,2668,2670,2673,2676,2679],{"class":422,"line":663},[420,2664,2665],{"class":2442},"  ZIP_FILE",[420,2667,2550],{"class":2478},[420,2669,2553],{"class":794},[420,2671,2672],{"class":2442},"ZIP_BASENAME",[420,2674,2675],{"class":794},"}",[420,2677,2678],{"class":523},".zip",[420,2680,2681],{"class":794},"\"\n",[420,2683,2684],{"class":422,"line":669},[420,2685,2686],{"class":1396},"fi\n",[420,2688,2689],{"class":422,"line":677},[420,2690,592],{"emptyLinePlaceholder":591},[420,2692,2693,2696,2698,2701],{"class":422,"line":688},[420,2694,2695],{"class":2417},"cd",[420,2697,2508],{"class":794},[420,2699,2700],{"class":2442},"$CI_PROJECT_DIR",[420,2702,2681],{"class":794},[420,2704,2705,2707,2709,2712,2715,2717,2720,2722,2724],{"class":422,"line":699},[420,2706,2577],{"class":1396},[420,2708,2475],{"class":501},[420,2710,2711],{"class":2478}," !",[420,2713,2714],{"class":2478}," -f",[420,2716,2508],{"class":794},[420,2718,2719],{"class":2442},"$ZIP_FILE",[420,2721,2517],{"class":794},[420,2723,2497],{"class":501},[420,2725,2500],{"class":1396},[420,2727,2728,2731,2733,2736,2738,2740],{"class":422,"line":711},[420,2729,2730],{"class":2417},"  echo",[420,2732,2508],{"class":794},[420,2734,2735],{"class":523},"[deploy-zip] ZIP_FILE not found: ",[420,2737,2719],{"class":2442},[420,2739,2517],{"class":794},[420,2741,2520],{"class":2478},[420,2743,2744,2747],{"class":422,"line":722},[420,2745,2746],{"class":2651},"  ls",[420,2748,2749],{"class":2421}," -la\n",[420,2751,2752,2755],{"class":422,"line":730},[420,2753,2754],{"class":2417},"  exit",[420,2756,2528],{"class":707},[420,2758,2759],{"class":422,"line":741},[420,2760,2686],{"class":1396},[420,2762,2763],{"class":422,"line":749},[420,2764,592],{"emptyLinePlaceholder":591},[420,2766,2767],{"class":422,"line":757},[420,2768,2769],{"class":491},"# askpass for non-interactive ssh/scp\n",[420,2771,2772,2775,2778],{"class":422,"line":765},[420,2773,2774],{"class":2651},"mkdir",[420,2776,2777],{"class":2421}," -p",[420,2779,2780],{"class":523}," /tmp\n",[420,2782,2783,2786,2788,2791,2794,2797,2800,2803,2806,2808,2811,2813,2816,2818,2820,2823,2826],{"class":422,"line":776},[420,2784,2785],{"class":2417},"echo",[420,2787,795],{"class":794},[420,2789,2790],{"class":523},"#!/bin/sh",[420,2792,2793],{"class":794},"'",[420,2795,2796],{"class":2478}," >",[420,2798,2799],{"class":523}," /tmp/askpass.sh",[420,2801,2802],{"class":501}," &&",[420,2804,2805],{"class":2417}," echo",[420,2807,795],{"class":794},[420,2809,2810],{"class":523},"echo \"$DEPLOY_PASSWORD\"",[420,2812,2793],{"class":794},[420,2814,2815],{"class":2478}," >>",[420,2817,2799],{"class":523},[420,2819,2802],{"class":501},[420,2821,2822],{"class":2651}," chmod",[420,2824,2825],{"class":523}," +x",[420,2827,2828],{"class":523}," /tmp/askpass.sh\n",[420,2830,2831,2835,2838,2840],{"class":422,"line":787},[420,2832,2834],{"class":2833},"sTNss","export",[420,2836,2837],{"class":2442}," SSH_ASKPASS",[420,2839,2550],{"class":2478},[420,2841,2842],{"class":2442},"/tmp/askpass.sh\n",[420,2844,2845,2847,2850,2852],{"class":422,"line":804},[420,2846,2834],{"class":2833},[420,2848,2849],{"class":2442}," DISPLAY",[420,2851,2550],{"class":2478},[420,2853,2854],{"class":2442},":0\n",[420,2856,2857],{"class":422,"line":814},[420,2858,592],{"emptyLinePlaceholder":591},[420,2860,2861,2864,2866,2868,2871,2874,2876,2878,2881],{"class":422,"line":825},[420,2862,2863],{"class":2442},"SSH_OPTS",[420,2865,2550],{"class":2478},[420,2867,2517],{"class":794},[420,2869,2870],{"class":523},"-p ",[420,2872,2873],{"class":794},"${",[420,2875,2547],{"class":2442},[420,2877,2675],{"class":794},[420,2879,2880],{"class":523}," -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o BatchMode=no",[420,2882,2681],{"class":794},[420,2884,2885],{"class":422,"line":839},[420,2886,592],{"emptyLinePlaceholder":591},[420,2888,2889],{"class":422,"line":849},[420,2890,2891],{"class":491},"# ensure remote dir exists\n",[420,2893,2894,2897,2900,2903,2905,2908,2910,2913,2915,2918,2920,2922,2925,2927,2930,2932,2934],{"class":422,"line":860},[420,2895,2896],{"class":2651},"setsid",[420,2898,2899],{"class":523}," ssh",[420,2901,2902],{"class":2442}," $SSH_OPTS ",[420,2904,2553],{"class":794},[420,2906,2907],{"class":2442},"DEPLOY_USER",[420,2909,2675],{"class":794},[420,2911,2912],{"class":523},"@",[420,2914,2873],{"class":794},[420,2916,2917],{"class":2442},"DEPLOY_HOST",[420,2919,2494],{"class":794},[420,2921,2508],{"class":794},[420,2923,2924],{"class":523},"mkdir -p '",[420,2926,2873],{"class":794},[420,2928,2929],{"class":2442},"DEPLOY_DIR",[420,2931,2675],{"class":794},[420,2933,2793],{"class":523},[420,2935,2681],{"class":794},[420,2937,2938],{"class":422,"line":870},[420,2939,592],{"emptyLinePlaceholder":591},[420,2941,2942],{"class":422,"line":880},[420,2943,2944],{"class":491},"# upload zip\n",[420,2946,2947,2949,2952,2955,2957,2959,2961,2964,2967,2969,2972,2974,2977],{"class":422,"line":891},[420,2948,2896],{"class":2651},[420,2950,2951],{"class":523}," scp",[420,2953,2954],{"class":2421}," -P",[420,2956,2482],{"class":794},[420,2958,2547],{"class":2442},[420,2960,2494],{"class":794},[420,2962,2963],{"class":2421}," -o",[420,2965,2966],{"class":523}," StrictHostKeyChecking=no",[420,2968,2963],{"class":2421},[420,2970,2971],{"class":523}," UserKnownHostsFile=/dev/null",[420,2973,2963],{"class":2421},[420,2975,2976],{"class":523}," BatchMode=no",[420,2978,2980],{"class":2979},"sQeA1"," \\\n",[420,2982,2983,2986,2988,2990,2992,2994,2996,2998,3000,3002,3004,3006,3008,3010,3012,3015],{"class":422,"line":901},[420,2984,2985],{"class":794},"  \"",[420,2987,2719],{"class":2442},[420,2989,2517],{"class":794},[420,2991,2482],{"class":794},[420,2993,2907],{"class":2442},[420,2995,2675],{"class":794},[420,2997,2912],{"class":523},[420,2999,2873],{"class":794},[420,3001,2917],{"class":2442},[420,3003,2675],{"class":794},[420,3005,520],{"class":523},[420,3007,2873],{"class":794},[420,3009,2929],{"class":2442},[420,3011,2675],{"class":794},[420,3013,3014],{"class":523},"/",[420,3016,2681],{"class":794},[420,3018,3019],{"class":422,"line":911},[420,3020,592],{"emptyLinePlaceholder":591},[420,3022,3023],{"class":422,"line":922},[420,3024,3025],{"class":491},"# unzip remotely and optional cleanup\n",[420,3027,3028,3030,3032,3034,3036,3038,3040,3042,3044,3046,3048],{"class":422,"line":932},[420,3029,2896],{"class":2651},[420,3031,2899],{"class":523},[420,3033,2902],{"class":2442},[420,3035,2553],{"class":794},[420,3037,2907],{"class":2442},[420,3039,2675],{"class":794},[420,3041,2912],{"class":523},[420,3043,2873],{"class":794},[420,3045,2917],{"class":2442},[420,3047,2494],{"class":794},[420,3049,2980],{"class":2979},[420,3051,3052,3054,3057,3059,3061,3063,3066,3068,3070,3072,3075,3077,3079,3081,3084,3086,3088,3090,3092],{"class":422,"line":942},[420,3053,2985],{"class":794},[420,3055,3056],{"class":523},"cd '",[420,3058,2873],{"class":794},[420,3060,2929],{"class":2442},[420,3062,2675],{"class":794},[420,3064,3065],{"class":523},"' && (command -v unzip >/dev/null 2>&1 || (apt-get update && apt-get install -y unzip || yum install -y unzip || true)) && unzip -o '",[420,3067,2873],{"class":794},[420,3069,2586],{"class":2442},[420,3071,2675],{"class":794},[420,3073,3074],{"class":523},"' -d '",[420,3076,2873],{"class":794},[420,3078,2929],{"class":2442},[420,3080,2675],{"class":794},[420,3082,3083],{"class":523},"' && rm -f '",[420,3085,2873],{"class":794},[420,3087,2586],{"class":2442},[420,3089,2675],{"class":794},[420,3091,2793],{"class":523},[420,3093,2681],{"class":794},[420,3095,3096],{"class":422,"line":947},[420,3097,592],{"emptyLinePlaceholder":591},[420,3099,3100,3102,3104,3107,3109,3112,3114,3116,3118,3120,3122,3124,3126,3128,3130,3132],{"class":422,"line":955},[420,3101,2785],{"class":2417},[420,3103,2508],{"class":794},[420,3105,3106],{"class":523},"[deploy-zip] deployed ",[420,3108,2719],{"class":2442},[420,3110,3111],{"class":523}," to ",[420,3113,2873],{"class":794},[420,3115,2907],{"class":2442},[420,3117,2675],{"class":794},[420,3119,2912],{"class":523},[420,3121,2873],{"class":794},[420,3123,2917],{"class":2442},[420,3125,2675],{"class":794},[420,3127,520],{"class":523},[420,3129,2873],{"class":794},[420,3131,2929],{"class":2442},[420,3133,2563],{"class":794},[411,3135,3138],{"className":2402,"code":3136,"filename":3137,"language":2405,"meta":416,"style":416},"#!/usr/bin/env bash\nset -euo pipefail\n\n# required envs\nfor v in BUILD_DIR CI_PROJECT_DIR CI_PROJECT_ID CI_SERVER_URL CI_JOB_ID; do\n  if [ -z \"${!v:-}\" ]; then\n    echo \"[package-zip] missing env: $v\" >&2\n    exit 1\n  fi\ndone\n\n# ensure zip exists (install once if missing)\nif ! command -v zip >/dev/null 2>&1; then\n  apt-get update && apt-get install -y zip && rm -rf /var/lib/apt/lists/*\nfi\n\nZIP_BASENAME=\"$(basename \"$BUILD_DIR\")\"\nZIP_FILE=\"${ZIP_BASENAME}.zip\"\n\ncd \"$(dirname \"$BUILD_DIR\")\"\nzip -rq \"$CI_PROJECT_DIR/$ZIP_FILE\" \"$ZIP_BASENAME\"\n\ncat > \"$CI_PROJECT_DIR/zip.env\" \u003C\u003CEOF\nZIP_BASENAME=$ZIP_BASENAME\nZIP_FILE=$ZIP_FILE\nZIP_ARTIFACT_JOB_ID=$CI_JOB_ID\nZIP_ARTIFACT_URL=$CI_SERVER_URL/api/v4/projects/$CI_PROJECT_ID/jobs/$CI_JOB_ID/artifacts/$ZIP_FILE\nEOF\n\necho \"[package-zip] created $CI_PROJECT_DIR/$ZIP_FILE\"\n","scripts/ci/package-zip.sh",[323,3139,3140,3144,3152,3156,3160,3186,3208,3223,3229,3233,3237,3241,3246,3273,3309,3313,3317,3333,3349,3353,3369,3394,3398,3421,3429,3437,3445,3470,3474,3478],{"__ignoreMap":416},[420,3141,3142],{"class":422,"line":423},[420,3143,2412],{"class":491},[420,3145,3146,3148,3150],{"class":422,"line":429},[420,3147,2418],{"class":2417},[420,3149,2422],{"class":2421},[420,3151,2425],{"class":523},[420,3153,3154],{"class":422,"line":435},[420,3155,592],{"emptyLinePlaceholder":591},[420,3157,3158],{"class":422,"line":441},[420,3159,2434],{"class":491},[420,3161,3162,3164,3166,3168,3171,3173,3176,3179,3182,3184],{"class":422,"line":447},[420,3163,2439],{"class":1396},[420,3165,2443],{"class":2442},[420,3167,2446],{"class":1396},[420,3169,3170],{"class":523}," BUILD_DIR",[420,3172,2449],{"class":523},[420,3174,3175],{"class":523}," CI_PROJECT_ID",[420,3177,3178],{"class":523}," CI_SERVER_URL",[420,3180,3181],{"class":523}," CI_JOB_ID",[420,3183,2464],{"class":501},[420,3185,2467],{"class":1396},[420,3187,3188,3190,3192,3194,3196,3198,3200,3202,3204,3206],{"class":422,"line":453},[420,3189,2472],{"class":1396},[420,3191,2475],{"class":501},[420,3193,2479],{"class":2478},[420,3195,2482],{"class":794},[420,3197,2485],{"class":2478},[420,3199,2488],{"class":2442},[420,3201,2491],{"class":2478},[420,3203,2494],{"class":794},[420,3205,2497],{"class":501},[420,3207,2500],{"class":1396},[420,3209,3210,3212,3214,3217,3219,3221],{"class":422,"line":459},[420,3211,2505],{"class":2417},[420,3213,2508],{"class":794},[420,3215,3216],{"class":523},"[package-zip] missing env: ",[420,3218,2514],{"class":2442},[420,3220,2517],{"class":794},[420,3222,2520],{"class":2478},[420,3224,3225,3227],{"class":422,"line":465},[420,3226,2525],{"class":2417},[420,3228,2528],{"class":707},[420,3230,3231],{"class":422,"line":471},[420,3232,2533],{"class":1396},[420,3234,3235],{"class":422,"line":575},[420,3236,2538],{"class":1396},[420,3238,3239],{"class":422,"line":588},[420,3240,592],{"emptyLinePlaceholder":591},[420,3242,3243],{"class":422,"line":595},[420,3244,3245],{"class":491},"# ensure zip exists (install once if missing)\n",[420,3247,3248,3250,3252,3255,3258,3261,3263,3266,3269,3271],{"class":422,"line":601},[420,3249,2577],{"class":1396},[420,3251,2711],{"class":2478},[420,3253,3254],{"class":2417}," command",[420,3256,3257],{"class":2421}," -v",[420,3259,3260],{"class":523}," zip",[420,3262,2796],{"class":2478},[420,3264,3265],{"class":523},"/dev/null",[420,3267,3268],{"class":2478}," 2>&1",[420,3270,2464],{"class":501},[420,3272,2500],{"class":1396},[420,3274,3275,3278,3281,3283,3286,3289,3292,3294,3296,3299,3302,3305],{"class":422,"line":609},[420,3276,3277],{"class":2651},"  apt-get",[420,3279,3280],{"class":523}," update",[420,3282,2802],{"class":501},[420,3284,3285],{"class":2651}," apt-get",[420,3287,3288],{"class":523}," install",[420,3290,3291],{"class":2421}," -y",[420,3293,3260],{"class":523},[420,3295,2802],{"class":501},[420,3297,3298],{"class":2651}," rm",[420,3300,3301],{"class":2421}," -rf",[420,3303,3304],{"class":523}," /var/lib/apt/lists/",[420,3306,3308],{"class":3307},"sSsL9","*\n",[420,3310,3311],{"class":422,"line":618},[420,3312,2686],{"class":1396},[420,3314,3315],{"class":422,"line":626},[420,3316,592],{"emptyLinePlaceholder":591},[420,3318,3319,3321,3323,3325,3327,3329,3331],{"class":422,"line":634},[420,3320,2672],{"class":2442},[420,3322,2550],{"class":2478},[420,3324,2648],{"class":794},[420,3326,2652],{"class":2651},[420,3328,2508],{"class":794},[420,3330,2657],{"class":2442},[420,3332,2660],{"class":794},[420,3334,3335,3337,3339,3341,3343,3345,3347],{"class":422,"line":642},[420,3336,2586],{"class":2442},[420,3338,2550],{"class":2478},[420,3340,2553],{"class":794},[420,3342,2672],{"class":2442},[420,3344,2675],{"class":794},[420,3346,2678],{"class":523},[420,3348,2681],{"class":794},[420,3350,3351],{"class":422,"line":650},[420,3352,592],{"emptyLinePlaceholder":591},[420,3354,3355,3357,3360,3363,3365,3367],{"class":422,"line":658},[420,3356,2695],{"class":2417},[420,3358,3359],{"class":794}," \"$(",[420,3361,3362],{"class":2651},"dirname",[420,3364,2508],{"class":794},[420,3366,2657],{"class":2442},[420,3368,2660],{"class":794},[420,3370,3371,3374,3377,3379,3381,3383,3385,3387,3389,3392],{"class":422,"line":663},[420,3372,3373],{"class":2651},"zip",[420,3375,3376],{"class":2421}," -rq",[420,3378,2508],{"class":794},[420,3380,2700],{"class":2442},[420,3382,3014],{"class":523},[420,3384,2719],{"class":2442},[420,3386,2517],{"class":794},[420,3388,2508],{"class":794},[420,3390,3391],{"class":2442},"$ZIP_BASENAME",[420,3393,2681],{"class":794},[420,3395,3396],{"class":422,"line":669},[420,3397,592],{"emptyLinePlaceholder":591},[420,3399,3400,3403,3405,3407,3409,3412,3414,3417],{"class":422,"line":677},[420,3401,3402],{"class":2651},"cat",[420,3404,2796],{"class":2478},[420,3406,2508],{"class":794},[420,3408,2700],{"class":2442},[420,3410,3411],{"class":523},"/zip.env",[420,3413,2517],{"class":794},[420,3415,3416],{"class":2478}," \u003C\u003C",[420,3418,3420],{"class":3419},"s00De","EOF\n",[420,3422,3423,3426],{"class":422,"line":688},[420,3424,3425],{"class":523},"ZIP_BASENAME=",[420,3427,3428],{"class":2442},"$ZIP_BASENAME\n",[420,3430,3431,3434],{"class":422,"line":699},[420,3432,3433],{"class":523},"ZIP_FILE=",[420,3435,3436],{"class":2442},"$ZIP_FILE\n",[420,3438,3439,3442],{"class":422,"line":711},[420,3440,3441],{"class":523},"ZIP_ARTIFACT_JOB_ID=",[420,3443,3444],{"class":2442},"$CI_JOB_ID\n",[420,3446,3447,3450,3453,3456,3459,3462,3465,3468],{"class":422,"line":722},[420,3448,3449],{"class":523},"ZIP_ARTIFACT_URL=",[420,3451,3452],{"class":2442},"$CI_SERVER_URL",[420,3454,3455],{"class":523},"/api/v4/projects/",[420,3457,3458],{"class":2442},"$CI_PROJECT_ID",[420,3460,3461],{"class":523},"/jobs/",[420,3463,3464],{"class":2442},"$CI_JOB_ID",[420,3466,3467],{"class":523},"/artifacts/",[420,3469,3436],{"class":2442},[420,3471,3472],{"class":422,"line":730},[420,3473,3420],{"class":3419},[420,3475,3476],{"class":422,"line":741},[420,3477,592],{"emptyLinePlaceholder":591},[420,3479,3480,3482,3484,3487,3489,3491,3493],{"class":422,"line":749},[420,3481,2785],{"class":2417},[420,3483,2508],{"class":794},[420,3485,3486],{"class":523},"[package-zip] created ",[420,3488,2700],{"class":2442},[420,3490,3014],{"class":523},[420,3492,2719],{"class":2442},[420,3494,2681],{"class":794},[411,3496,3501],{"className":3497,"code":3498,"filename":3499,"language":3500,"meta":416,"style":416},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","#!/usr/bin/env node\n// 企业微信群机器人通知脚本（参考 https://developer.work.weixin.qq.com/document/path/99110 ）\n\nconst args = process.argv.slice(2)\n\nfunction parseArgs(argv) {\n  const result = { type: '', label: '', success: false, failed: false }\n  for (let i = 0; i \u003C argv.length; i++) {\n    const a = argv[i]\n    if (a === '--type')\n      result.type = argv[++i]\n    else if (a === '--label')\n      result.label = argv[++i]\n    else if (a === '--success')\n      result.success = true\n    else if (a === '--failed')\n      result.failed = true\n  }\n  return result\n}\n\nfunction formatShanghai(date) {\n  const d = date instanceof Date ? date : new Date(date)\n  const parts = new Intl.DateTimeFormat('en-GB', {\n    timeZone: 'Asia/Shanghai',\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n    hour12: false,\n  }).formatToParts(d)\n  const get = type => parts.find(p => p.type === type)?.value || '00'\n  const yyyy = get('year')\n  const MM = get('month')\n  const dd = get('day')\n  const HH = get('hour')\n  const mm = get('minute')\n  const ss = get('second')\n  return `${yyyy}-${MM}-${dd} ${HH}:${mm}:${ss}`\n}\n\nfunction formatHMS(totalSeconds) {\n  const pad = n => String(n).padStart(2, '0')\n  const s = Math.max(0, Math.floor(totalSeconds))\n  const hh = pad(Math.floor(s / 3600))\n  const mm = pad(Math.floor((s % 3600) / 60))\n  const ss = pad(s % 60)\n  return `${hh}:${mm}:${ss}`\n}\n\nasync function send(payload) {\n  const url = process.env.WECHAT_WEBHOOK_URL\n  if (!url) {\n    console.log('[wechat-notify] WECHAT_WEBHOOK_URL not set, skip sending.')\n    return { skipped: true }\n  }\n  try {\n    const res = await fetch(url, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(payload),\n    })\n    const text = await res.text()\n    console.log('[wechat-notify] response:', res.status, text)\n    return { status: res.status, body: text }\n  }\n  catch (e) {\n    console.error('[wechat-notify] error:', e && e.message ? e.message : e)\n    return { error: true }\n  }\n}\n\nfunction buildContentMarkdown({ type, label, success, failed }) {\n  const CI_MERGE_REQUEST_PROJECT_URL = `${process.env.CI_MERGE_REQUEST_PROJECT_URL}/-/merge_requests/${process.env.CI_MERGE_REQUEST_IID}`\n  const DEPLOY_HOST = process.env.DEPLOY_HOST\n  const DEPLOY_DIR = process.env.DEPLOY_DIR\n  const BUILD_DIR = process.env.BUILD_DIR\n  const ZIP_ARTIFACT_URL = process.env.ZIP_ARTIFACT_URL\n\n  // 提交者\n  const author = (process.env.GITLAB_USER_NAME || '').trim()\n  // 审核者\n  const reviewers = author === '张三' ? 'reviewer1' : 'reviewer2'\n\n  // 选择 @ 成员（即 userid）\n  const authorMap = {\n    张三: 'zhang.san',\n    李四: 'li.si',\n    王五: 'wang.wu',\n    赵六: 'zhao.liu',\n    孙七: 'sun.qi',\n    周八: 'zhou.ba',\n  }\n\n  // 时间计算\n  const startISO = process.env.CI_PIPELINE_CREATED_AT || new Date().toISOString()\n  const start = new Date(startISO)\n  const now = new Date()\n  const elapsedSec = (now - start) / 1000\n\n  // 状态处理（失败优先）\n  const isFailed = !!failed\n  const isSuccess = !!success && !failed\n\n  // 标题与基础信息\n  const title = `\u003Cfont color=\"info\">【${process.env.CI_PROJECT_TITLE}】\u003C/font> ${label}`\n  const lines = []\n  lines.push(title)\n\n  // 公共信息区块\n  lines.push(`> 提交者：\u003Cfont color=\"comment\">${author}\u003C/font>`)\n\n  // 类型分支逻辑\n  if (type === 'CI-start') {\n    lines.push(`> 开始时间：\u003Cfont color=\"comment\">${formatShanghai(start)}\u003C/font>`)\n    lines.push(`\u003C@${reviewers}> [查看合并请求](${CI_MERGE_REQUEST_PROJECT_URL})`)\n  }\n  else if (type === 'CI-end') {\n    lines.push(`> 开始-结束时间：\u003Cfont color=\"comment\">${formatShanghai(start)} 至 ${formatShanghai(now)}\u003C/font>`)\n    lines.push(`> 总耗时：\u003Cfont color=\"comment\">${formatHMS(elapsedSec)}\u003C/font>`)\n    if (isSuccess) {\n      lines.push(`> 状态：\u003Cfont color=\"info\">成功\u003C/font> 🎉`)\n      lines.push(`\u003C@${reviewers}> [查看合并请求](${CI_MERGE_REQUEST_PROJECT_URL})`)\n    }\n    else if (isFailed) {\n      lines.push(`> 状态：\u003Cfont color=\"warning\">失败\u003C/font> 😭`)\n      lines.push(`\u003C@${authorMap[author]}> \u003C@${reviewers}> [查看合并请求](${CI_MERGE_REQUEST_PROJECT_URL})`)\n    }\n  }\n  else if (type === 'deploy-start') {\n    lines.push(`> 开始时间：\u003Cfont color=\"comment\">${formatShanghai(start)}\u003C/font>`)\n    lines.push(`> 打包目录：\u003Cfont color=\"comment\">${BUILD_DIR}\u003C/font>`)\n    lines.push(`> 目标主机：\u003Cfont color=\"comment\">${DEPLOY_HOST}\u003C/font>`)\n    lines.push(`> 目标目录：\u003Cfont color=\"comment\">${DEPLOY_DIR}\u003C/font>`)\n  }\n  else if (type === 'deploy-end' || type === 'deploy:prod-end') {\n    lines.push(`> 开始-结束时间：\u003Cfont color=\"comment\">${formatShanghai(start)} 至 ${formatShanghai(now)}\u003C/font>`)\n    lines.push(`> 总耗时：\u003Cfont color=\"comment\">${formatHMS(elapsedSec)}\u003C/font>`)\n    if (ZIP_ARTIFACT_URL) {\n      lines.push(`> [下载部署包](${ZIP_ARTIFACT_URL})`)\n    }\n    else {\n      lines.push(`\u003C@${authorMap[author]}> \u003C@${reviewers}>`)\n    }\n  }\n  else if (type === 'deploy:prod-start') {\n    lines.push(`> 开始时间：\u003Cfont color=\"comment\">${formatShanghai(start)}\u003C/font>`)\n    lines.push(`> 打包目录：\u003Cfont color=\"comment\">${BUILD_DIR}\u003C/font>`)\n  }\n  lines.push(`> [查看流水线](${process.env.CI_PIPELINE_URL})`)\n\n  return lines.join('\\n')\n}\n\nasync function main() {\n  const { type, label, success, failed } = parseArgs(args)\n  if (!type) {\n    console.log('[wechat-notify] no --type provided, skip.')\n    return\n  }\n  const md = buildContentMarkdown({ type, label, success, failed })\n  await send({ msgtype: 'markdown', markdown: { content: md } })\n}\n\nmain().catch((e) => {\n  console.error('[wechat-notify] unexpected error:', e)\n}).finally(() => {\n  // 不阻塞流水线\n  process.exit(0)\n})\n","scripts/ci/wechat-notify.js","js",[323,3502,3503,3508,3513,3517,3554,3558,3577,3631,3678,3699,3721,3743,3765,3786,3807,3820,3841,3854,3859,3867,3872,3876,3892,3930,3962,3979,3995,4011,4026,4041,4056,4071,4082,4101,4158,4180,4202,4224,4246,4268,4290,4353,4357,4361,4377,4421,4458,4491,4528,4548,4579,4583,4587,4607,4628,4643,4664,4681,4685,4692,4715,4731,4760,4783,4790,4811,4843,4871,4875,4889,4935,4950,4954,4958,4962,4991,5038,5057,5076,5095,5115,5119,5124,5159,5164,5202,5206,5211,5222,5238,5254,5270,5286,5302,5318,5322,5326,5331,5367,5387,5402,5428,5432,5437,5452,5471,5475,5480,5520,5532,5549,5553,5558,5588,5592,5597,5618,5655,5692,5696,5720,5768,5803,5816,5836,5870,5875,5890,5909,5960,5964,5968,5991,6023,6050,6077,6104,6108,6144,6190,6222,6235,6262,6266,6272,6313,6317,6321,6344,6377,6404,6409,6446,6451,6474,6479,6484,6498,6533,6548,6568,6574,6579,6614,6660,6665,6670,6695,6720,6740,6746,6763],{"__ignoreMap":416},[420,3504,3505],{"class":422,"line":423},[420,3506,3507],{"class":491},"#!/usr/bin/env node\n",[420,3509,3510],{"class":422,"line":429},[420,3511,3512],{"class":491},"// 企业微信群机器人通知脚本（参考 https://developer.work.weixin.qq.com/document/path/99110 ）\n",[420,3514,3515],{"class":422,"line":435},[420,3516,592],{"emptyLinePlaceholder":591},[420,3518,3519,3523,3527,3530,3533,3536,3539,3541,3545,3548,3551],{"class":422,"line":441},[420,3520,3522],{"class":3521},"srJo8","const",[420,3524,3526],{"class":3525},"s91G_"," args",[420,3528,3529],{"class":2478}," =",[420,3531,3532],{"class":2442}," process",[420,3534,3535],{"class":501},".",[420,3537,3538],{"class":2442},"argv",[420,3540,3535],{"class":501},[420,3542,3544],{"class":3543},"sD0ED","slice",[420,3546,3547],{"class":2442},"(",[420,3549,3550],{"class":707},"2",[420,3552,3553],{"class":2442},")\n",[420,3555,3556],{"class":422,"line":447},[420,3557,592],{"emptyLinePlaceholder":591},[420,3559,3560,3563,3566,3568,3571,3574],{"class":422,"line":453},[420,3561,3562],{"class":3521},"function",[420,3564,3565],{"class":3543}," parseArgs",[420,3567,3547],{"class":501},[420,3569,3538],{"class":3570},"sQgqH",[420,3572,3573],{"class":501},")",[420,3575,3576],{"class":501}," {\n",[420,3578,3579,3582,3585,3587,3590,3594,3596,3599,3602,3605,3607,3609,3611,3614,3616,3619,3621,3624,3626,3628],{"class":422,"line":459},[420,3580,3581],{"class":3521},"  const",[420,3583,3584],{"class":3525}," result",[420,3586,3529],{"class":2478},[420,3588,3589],{"class":501}," {",[420,3591,3593],{"class":3592},"squCx"," type",[420,3595,520],{"class":501},[420,3597,3598],{"class":794}," ''",[420,3600,3601],{"class":501},",",[420,3603,3604],{"class":3592}," label",[420,3606,520],{"class":501},[420,3608,3598],{"class":794},[420,3610,3601],{"class":501},[420,3612,3613],{"class":3592}," success",[420,3615,520],{"class":501},[420,3617,3618],{"class":1220}," false",[420,3620,3601],{"class":501},[420,3622,3623],{"class":3592}," failed",[420,3625,520],{"class":501},[420,3627,3618],{"class":1220},[420,3629,3630],{"class":501}," }\n",[420,3632,3633,3636,3639,3642,3645,3647,3650,3652,3654,3657,3660,3662,3665,3667,3669,3672,3675],{"class":422,"line":465},[420,3634,3635],{"class":1396},"  for",[420,3637,3638],{"class":3592}," (",[420,3640,3641],{"class":3521},"let",[420,3643,3644],{"class":2442}," i",[420,3646,3529],{"class":2478},[420,3648,3649],{"class":707}," 0",[420,3651,2464],{"class":501},[420,3653,3644],{"class":2442},[420,3655,3656],{"class":2478}," \u003C",[420,3658,3659],{"class":2442}," argv",[420,3661,3535],{"class":501},[420,3663,3664],{"class":3525},"length",[420,3666,2464],{"class":501},[420,3668,3644],{"class":2442},[420,3670,3671],{"class":2478},"++",[420,3673,3674],{"class":3592},") ",[420,3676,3677],{"class":501},"{\n",[420,3679,3680,3683,3686,3688,3690,3693,3696],{"class":422,"line":471},[420,3681,3682],{"class":3521},"    const",[420,3684,3685],{"class":3525}," a",[420,3687,3529],{"class":2478},[420,3689,3659],{"class":2442},[420,3691,3692],{"class":3592},"[",[420,3694,3695],{"class":2442},"i",[420,3697,3698],{"class":3592},"]\n",[420,3700,3701,3704,3706,3709,3712,3714,3717,3719],{"class":422,"line":575},[420,3702,3703],{"class":1396},"    if",[420,3705,3638],{"class":3592},[420,3707,3708],{"class":2442},"a",[420,3710,3711],{"class":2478}," ===",[420,3713,795],{"class":794},[420,3715,3716],{"class":523},"--type",[420,3718,2793],{"class":794},[420,3720,3553],{"class":3592},[420,3722,3723,3726,3728,3731,3733,3735,3737,3739,3741],{"class":422,"line":588},[420,3724,3725],{"class":2442},"      result",[420,3727,3535],{"class":501},[420,3729,3730],{"class":2442},"type",[420,3732,3529],{"class":2478},[420,3734,3659],{"class":2442},[420,3736,3692],{"class":3592},[420,3738,3671],{"class":2478},[420,3740,3695],{"class":2442},[420,3742,3698],{"class":3592},[420,3744,3745,3748,3750,3752,3754,3756,3758,3761,3763],{"class":422,"line":595},[420,3746,3747],{"class":1396},"    else",[420,3749,517],{"class":1396},[420,3751,3638],{"class":3592},[420,3753,3708],{"class":2442},[420,3755,3711],{"class":2478},[420,3757,795],{"class":794},[420,3759,3760],{"class":523},"--label",[420,3762,2793],{"class":794},[420,3764,3553],{"class":3592},[420,3766,3767,3769,3771,3774,3776,3778,3780,3782,3784],{"class":422,"line":601},[420,3768,3725],{"class":2442},[420,3770,3535],{"class":501},[420,3772,3773],{"class":2442},"label",[420,3775,3529],{"class":2478},[420,3777,3659],{"class":2442},[420,3779,3692],{"class":3592},[420,3781,3671],{"class":2478},[420,3783,3695],{"class":2442},[420,3785,3698],{"class":3592},[420,3787,3788,3790,3792,3794,3796,3798,3800,3803,3805],{"class":422,"line":609},[420,3789,3747],{"class":1396},[420,3791,517],{"class":1396},[420,3793,3638],{"class":3592},[420,3795,3708],{"class":2442},[420,3797,3711],{"class":2478},[420,3799,795],{"class":794},[420,3801,3802],{"class":523},"--success",[420,3804,2793],{"class":794},[420,3806,3553],{"class":3592},[420,3808,3809,3811,3813,3816,3818],{"class":422,"line":618},[420,3810,3725],{"class":2442},[420,3812,3535],{"class":501},[420,3814,3815],{"class":2442},"success",[420,3817,3529],{"class":2478},[420,3819,1221],{"class":1220},[420,3821,3822,3824,3826,3828,3830,3832,3834,3837,3839],{"class":422,"line":626},[420,3823,3747],{"class":1396},[420,3825,517],{"class":1396},[420,3827,3638],{"class":3592},[420,3829,3708],{"class":2442},[420,3831,3711],{"class":2478},[420,3833,795],{"class":794},[420,3835,3836],{"class":523},"--failed",[420,3838,2793],{"class":794},[420,3840,3553],{"class":3592},[420,3842,3843,3845,3847,3850,3852],{"class":422,"line":634},[420,3844,3725],{"class":2442},[420,3846,3535],{"class":501},[420,3848,3849],{"class":2442},"failed",[420,3851,3529],{"class":2478},[420,3853,1221],{"class":1220},[420,3855,3856],{"class":422,"line":642},[420,3857,3858],{"class":501},"  }\n",[420,3860,3861,3864],{"class":422,"line":650},[420,3862,3863],{"class":1396},"  return",[420,3865,3866],{"class":2442}," result\n",[420,3868,3869],{"class":422,"line":658},[420,3870,3871],{"class":501},"}\n",[420,3873,3874],{"class":422,"line":663},[420,3875,592],{"emptyLinePlaceholder":591},[420,3877,3878,3880,3883,3885,3888,3890],{"class":422,"line":669},[420,3879,3562],{"class":3521},[420,3881,3882],{"class":3543}," formatShanghai",[420,3884,3547],{"class":501},[420,3886,3887],{"class":3570},"date",[420,3889,3573],{"class":501},[420,3891,3576],{"class":501},[420,3893,3894,3896,3899,3901,3904,3907,3911,3914,3916,3919,3922,3924,3926,3928],{"class":422,"line":677},[420,3895,3581],{"class":3521},[420,3897,3898],{"class":3525}," d",[420,3900,3529],{"class":2478},[420,3902,3903],{"class":2442}," date",[420,3905,3906],{"class":2478}," instanceof",[420,3908,3910],{"class":3909},"sKvfc"," Date",[420,3912,3913],{"class":2478}," ?",[420,3915,3903],{"class":2442},[420,3917,3918],{"class":2478}," :",[420,3920,3921],{"class":2478}," new",[420,3923,3910],{"class":3543},[420,3925,3547],{"class":3592},[420,3927,3887],{"class":2442},[420,3929,3553],{"class":3592},[420,3931,3932,3934,3937,3939,3941,3944,3946,3949,3951,3953,3956,3958,3960],{"class":422,"line":688},[420,3933,3581],{"class":3521},[420,3935,3936],{"class":3525}," parts",[420,3938,3529],{"class":2478},[420,3940,3921],{"class":2478},[420,3942,3943],{"class":2442}," Intl",[420,3945,3535],{"class":501},[420,3947,3948],{"class":3543},"DateTimeFormat",[420,3950,3547],{"class":3592},[420,3952,2793],{"class":794},[420,3954,3955],{"class":523},"en-GB",[420,3957,2793],{"class":794},[420,3959,3601],{"class":501},[420,3961,3576],{"class":501},[420,3963,3964,3967,3969,3971,3974,3976],{"class":422,"line":699},[420,3965,3966],{"class":3592},"    timeZone",[420,3968,520],{"class":501},[420,3970,795],{"class":794},[420,3972,3973],{"class":523},"Asia/Shanghai",[420,3975,2793],{"class":794},[420,3977,3978],{"class":501},",\n",[420,3980,3981,3984,3986,3988,3991,3993],{"class":422,"line":711},[420,3982,3983],{"class":3592},"    year",[420,3985,520],{"class":501},[420,3987,795],{"class":794},[420,3989,3990],{"class":523},"numeric",[420,3992,2793],{"class":794},[420,3994,3978],{"class":501},[420,3996,3997,4000,4002,4004,4007,4009],{"class":422,"line":722},[420,3998,3999],{"class":3592},"    month",[420,4001,520],{"class":501},[420,4003,795],{"class":794},[420,4005,4006],{"class":523},"2-digit",[420,4008,2793],{"class":794},[420,4010,3978],{"class":501},[420,4012,4013,4016,4018,4020,4022,4024],{"class":422,"line":730},[420,4014,4015],{"class":3592},"    day",[420,4017,520],{"class":501},[420,4019,795],{"class":794},[420,4021,4006],{"class":523},[420,4023,2793],{"class":794},[420,4025,3978],{"class":501},[420,4027,4028,4031,4033,4035,4037,4039],{"class":422,"line":741},[420,4029,4030],{"class":3592},"    hour",[420,4032,520],{"class":501},[420,4034,795],{"class":794},[420,4036,4006],{"class":523},[420,4038,2793],{"class":794},[420,4040,3978],{"class":501},[420,4042,4043,4046,4048,4050,4052,4054],{"class":422,"line":749},[420,4044,4045],{"class":3592},"    minute",[420,4047,520],{"class":501},[420,4049,795],{"class":794},[420,4051,4006],{"class":523},[420,4053,2793],{"class":794},[420,4055,3978],{"class":501},[420,4057,4058,4061,4063,4065,4067,4069],{"class":422,"line":757},[420,4059,4060],{"class":3592},"    second",[420,4062,520],{"class":501},[420,4064,795],{"class":794},[420,4066,4006],{"class":523},[420,4068,2793],{"class":794},[420,4070,3978],{"class":501},[420,4072,4073,4076,4078,4080],{"class":422,"line":765},[420,4074,4075],{"class":3592},"    hour12",[420,4077,520],{"class":501},[420,4079,3618],{"class":1220},[420,4081,3978],{"class":501},[420,4083,4084,4087,4089,4091,4094,4096,4099],{"class":422,"line":776},[420,4085,4086],{"class":501},"  }",[420,4088,3573],{"class":3592},[420,4090,3535],{"class":501},[420,4092,4093],{"class":3543},"formatToParts",[420,4095,3547],{"class":3592},[420,4097,4098],{"class":2442},"d",[420,4100,3553],{"class":3592},[420,4102,4103,4105,4109,4111,4113,4116,4118,4120,4123,4125,4127,4129,4132,4134,4136,4138,4140,4142,4145,4148,4151,4153,4156],{"class":422,"line":787},[420,4104,3581],{"class":3521},[420,4106,4108],{"class":4107},"sh7YU"," get",[420,4110,3529],{"class":2478},[420,4112,3593],{"class":3570},[420,4114,4115],{"class":3521}," =>",[420,4117,3936],{"class":2442},[420,4119,3535],{"class":501},[420,4121,4122],{"class":3543},"find",[420,4124,3547],{"class":3592},[420,4126,305],{"class":3570},[420,4128,4115],{"class":3521},[420,4130,4131],{"class":2442}," p",[420,4133,3535],{"class":501},[420,4135,3730],{"class":2442},[420,4137,3711],{"class":2478},[420,4139,3593],{"class":2442},[420,4141,3573],{"class":3592},[420,4143,4144],{"class":501},"?.",[420,4146,4147],{"class":2442},"value",[420,4149,4150],{"class":2478}," ||",[420,4152,795],{"class":794},[420,4154,4155],{"class":523},"00",[420,4157,801],{"class":794},[420,4159,4160,4162,4165,4167,4169,4171,4173,4176,4178],{"class":422,"line":804},[420,4161,3581],{"class":3521},[420,4163,4164],{"class":3525}," yyyy",[420,4166,3529],{"class":2478},[420,4168,4108],{"class":3543},[420,4170,3547],{"class":3592},[420,4172,2793],{"class":794},[420,4174,4175],{"class":523},"year",[420,4177,2793],{"class":794},[420,4179,3553],{"class":3592},[420,4181,4182,4184,4187,4189,4191,4193,4195,4198,4200],{"class":422,"line":814},[420,4183,3581],{"class":3521},[420,4185,4186],{"class":3525}," MM",[420,4188,3529],{"class":2478},[420,4190,4108],{"class":3543},[420,4192,3547],{"class":3592},[420,4194,2793],{"class":794},[420,4196,4197],{"class":523},"month",[420,4199,2793],{"class":794},[420,4201,3553],{"class":3592},[420,4203,4204,4206,4209,4211,4213,4215,4217,4220,4222],{"class":422,"line":825},[420,4205,3581],{"class":3521},[420,4207,4208],{"class":3525}," dd",[420,4210,3529],{"class":2478},[420,4212,4108],{"class":3543},[420,4214,3547],{"class":3592},[420,4216,2793],{"class":794},[420,4218,4219],{"class":523},"day",[420,4221,2793],{"class":794},[420,4223,3553],{"class":3592},[420,4225,4226,4228,4231,4233,4235,4237,4239,4242,4244],{"class":422,"line":839},[420,4227,3581],{"class":3521},[420,4229,4230],{"class":3525}," HH",[420,4232,3529],{"class":2478},[420,4234,4108],{"class":3543},[420,4236,3547],{"class":3592},[420,4238,2793],{"class":794},[420,4240,4241],{"class":523},"hour",[420,4243,2793],{"class":794},[420,4245,3553],{"class":3592},[420,4247,4248,4250,4253,4255,4257,4259,4261,4264,4266],{"class":422,"line":849},[420,4249,3581],{"class":3521},[420,4251,4252],{"class":3525}," mm",[420,4254,3529],{"class":2478},[420,4256,4108],{"class":3543},[420,4258,3547],{"class":3592},[420,4260,2793],{"class":794},[420,4262,4263],{"class":523},"minute",[420,4265,2793],{"class":794},[420,4267,3553],{"class":3592},[420,4269,4270,4272,4275,4277,4279,4281,4283,4286,4288],{"class":422,"line":860},[420,4271,3581],{"class":3521},[420,4273,4274],{"class":3525}," ss",[420,4276,3529],{"class":2478},[420,4278,4108],{"class":3543},[420,4280,3547],{"class":3592},[420,4282,2793],{"class":794},[420,4284,4285],{"class":523},"second",[420,4287,2793],{"class":794},[420,4289,3553],{"class":3592},[420,4291,4292,4294,4297,4300,4303,4305,4308,4310,4313,4315,4317,4319,4322,4324,4327,4330,4332,4334,4336,4339,4341,4343,4345,4348,4350],{"class":422,"line":870},[420,4293,3863],{"class":1396},[420,4295,4296],{"class":794}," `",[420,4298,2873],{"class":4299},"slF1C",[420,4301,4302],{"class":2442},"yyyy",[420,4304,2675],{"class":4299},[420,4306,4307],{"class":523},"-",[420,4309,2873],{"class":4299},[420,4311,4312],{"class":3525},"MM",[420,4314,2675],{"class":4299},[420,4316,4307],{"class":523},[420,4318,2873],{"class":4299},[420,4320,4321],{"class":2442},"dd",[420,4323,2675],{"class":4299},[420,4325,4326],{"class":4299}," ${",[420,4328,4329],{"class":3525},"HH",[420,4331,2675],{"class":4299},[420,4333,520],{"class":523},[420,4335,2873],{"class":4299},[420,4337,4338],{"class":2442},"mm",[420,4340,2675],{"class":4299},[420,4342,520],{"class":523},[420,4344,2873],{"class":4299},[420,4346,4347],{"class":2442},"ss",[420,4349,2675],{"class":4299},[420,4351,4352],{"class":794},"`\n",[420,4354,4355],{"class":422,"line":880},[420,4356,3871],{"class":501},[420,4358,4359],{"class":422,"line":891},[420,4360,592],{"emptyLinePlaceholder":591},[420,4362,4363,4365,4368,4370,4373,4375],{"class":422,"line":901},[420,4364,3562],{"class":3521},[420,4366,4367],{"class":3543}," formatHMS",[420,4369,3547],{"class":501},[420,4371,4372],{"class":3570},"totalSeconds",[420,4374,3573],{"class":501},[420,4376,3576],{"class":501},[420,4378,4379,4381,4384,4386,4389,4391,4394,4396,4399,4401,4403,4406,4408,4410,4412,4414,4417,4419],{"class":422,"line":911},[420,4380,3581],{"class":3521},[420,4382,4383],{"class":4107}," pad",[420,4385,3529],{"class":2478},[420,4387,4388],{"class":3570}," n",[420,4390,4115],{"class":3521},[420,4392,4393],{"class":3543}," String",[420,4395,3547],{"class":3592},[420,4397,4398],{"class":2442},"n",[420,4400,3573],{"class":3592},[420,4402,3535],{"class":501},[420,4404,4405],{"class":3543},"padStart",[420,4407,3547],{"class":3592},[420,4409,3550],{"class":707},[420,4411,3601],{"class":501},[420,4413,795],{"class":794},[420,4415,4416],{"class":523},"0",[420,4418,2793],{"class":794},[420,4420,3553],{"class":3592},[420,4422,4423,4425,4428,4430,4433,4435,4438,4440,4442,4444,4446,4448,4451,4453,4455],{"class":422,"line":922},[420,4424,3581],{"class":3521},[420,4426,4427],{"class":3525}," s",[420,4429,3529],{"class":2478},[420,4431,4432],{"class":2442}," Math",[420,4434,3535],{"class":501},[420,4436,4437],{"class":3543},"max",[420,4439,3547],{"class":3592},[420,4441,4416],{"class":707},[420,4443,3601],{"class":501},[420,4445,4432],{"class":2442},[420,4447,3535],{"class":501},[420,4449,4450],{"class":3543},"floor",[420,4452,3547],{"class":3592},[420,4454,4372],{"class":2442},[420,4456,4457],{"class":3592},"))\n",[420,4459,4460,4462,4465,4467,4469,4471,4474,4476,4478,4480,4483,4486,4489],{"class":422,"line":932},[420,4461,3581],{"class":3521},[420,4463,4464],{"class":3525}," hh",[420,4466,3529],{"class":2478},[420,4468,4383],{"class":3543},[420,4470,3547],{"class":3592},[420,4472,4473],{"class":2442},"Math",[420,4475,3535],{"class":501},[420,4477,4450],{"class":3543},[420,4479,3547],{"class":3592},[420,4481,4482],{"class":2442},"s",[420,4484,4485],{"class":2478}," /",[420,4487,4488],{"class":707}," 3600",[420,4490,4457],{"class":3592},[420,4492,4493,4495,4497,4499,4501,4503,4505,4507,4509,4512,4514,4517,4519,4521,4523,4526],{"class":422,"line":942},[420,4494,3581],{"class":3521},[420,4496,4252],{"class":3525},[420,4498,3529],{"class":2478},[420,4500,4383],{"class":3543},[420,4502,3547],{"class":3592},[420,4504,4473],{"class":2442},[420,4506,3535],{"class":501},[420,4508,4450],{"class":3543},[420,4510,4511],{"class":3592},"((",[420,4513,4482],{"class":2442},[420,4515,4516],{"class":2478}," %",[420,4518,4488],{"class":707},[420,4520,3674],{"class":3592},[420,4522,3014],{"class":2478},[420,4524,4525],{"class":707}," 60",[420,4527,4457],{"class":3592},[420,4529,4530,4532,4534,4536,4538,4540,4542,4544,4546],{"class":422,"line":947},[420,4531,3581],{"class":3521},[420,4533,4274],{"class":3525},[420,4535,3529],{"class":2478},[420,4537,4383],{"class":3543},[420,4539,3547],{"class":3592},[420,4541,4482],{"class":2442},[420,4543,4516],{"class":2478},[420,4545,4525],{"class":707},[420,4547,3553],{"class":3592},[420,4549,4550,4552,4554,4556,4559,4561,4563,4565,4567,4569,4571,4573,4575,4577],{"class":422,"line":955},[420,4551,3863],{"class":1396},[420,4553,4296],{"class":794},[420,4555,2873],{"class":4299},[420,4557,4558],{"class":2442},"hh",[420,4560,2675],{"class":4299},[420,4562,520],{"class":523},[420,4564,2873],{"class":4299},[420,4566,4338],{"class":2442},[420,4568,2675],{"class":4299},[420,4570,520],{"class":523},[420,4572,2873],{"class":4299},[420,4574,4347],{"class":2442},[420,4576,2675],{"class":4299},[420,4578,4352],{"class":794},[420,4580,4581],{"class":422,"line":966},[420,4582,3871],{"class":501},[420,4584,4585],{"class":422,"line":974},[420,4586,592],{"emptyLinePlaceholder":591},[420,4588,4589,4592,4595,4598,4600,4603,4605],{"class":422,"line":982},[420,4590,4591],{"class":2833},"async",[420,4593,4594],{"class":3521}," function",[420,4596,4597],{"class":3543}," send",[420,4599,3547],{"class":501},[420,4601,4602],{"class":3570},"payload",[420,4604,3573],{"class":501},[420,4606,3576],{"class":501},[420,4608,4609,4611,4614,4616,4618,4620,4623,4625],{"class":422,"line":987},[420,4610,3581],{"class":3521},[420,4612,4613],{"class":3525}," url",[420,4615,3529],{"class":2478},[420,4617,3532],{"class":2442},[420,4619,3535],{"class":501},[420,4621,4622],{"class":2442},"env",[420,4624,3535],{"class":501},[420,4626,4627],{"class":3525},"WECHAT_WEBHOOK_URL\n",[420,4629,4630,4632,4634,4636,4639,4641],{"class":422,"line":995},[420,4631,2472],{"class":1396},[420,4633,3638],{"class":3592},[420,4635,2485],{"class":2478},[420,4637,4638],{"class":2442},"url",[420,4640,3674],{"class":3592},[420,4642,3677],{"class":501},[420,4644,4645,4648,4650,4653,4655,4657,4660,4662],{"class":422,"line":1008},[420,4646,4647],{"class":2442},"    console",[420,4649,3535],{"class":501},[420,4651,4652],{"class":3543},"log",[420,4654,3547],{"class":3592},[420,4656,2793],{"class":794},[420,4658,4659],{"class":523},"[wechat-notify] WECHAT_WEBHOOK_URL not set, skip sending.",[420,4661,2793],{"class":794},[420,4663,3553],{"class":3592},[420,4665,4666,4669,4671,4674,4676,4679],{"class":422,"line":1016},[420,4667,4668],{"class":1396},"    return",[420,4670,3589],{"class":501},[420,4672,4673],{"class":3592}," skipped",[420,4675,520],{"class":501},[420,4677,4678],{"class":1220}," true",[420,4680,3630],{"class":501},[420,4682,4683],{"class":422,"line":1028},[420,4684,3858],{"class":501},[420,4686,4687,4690],{"class":422,"line":1040},[420,4688,4689],{"class":1396},"  try",[420,4691,3576],{"class":501},[420,4693,4694,4696,4699,4701,4704,4707,4709,4711,4713],{"class":422,"line":1052},[420,4695,3682],{"class":3521},[420,4697,4698],{"class":3525}," res",[420,4700,3529],{"class":2478},[420,4702,4703],{"class":1396}," await",[420,4705,4706],{"class":3543}," fetch",[420,4708,3547],{"class":3592},[420,4710,4638],{"class":2442},[420,4712,3601],{"class":501},[420,4714,3576],{"class":501},[420,4716,4717,4720,4722,4724,4727,4729],{"class":422,"line":1059},[420,4718,4719],{"class":3592},"      method",[420,4721,520],{"class":501},[420,4723,795],{"class":794},[420,4725,4726],{"class":523},"POST",[420,4728,2793],{"class":794},[420,4730,3978],{"class":501},[420,4732,4733,4736,4738,4740,4742,4746,4748,4750,4752,4755,4757],{"class":422,"line":1071},[420,4734,4735],{"class":3592},"      headers",[420,4737,520],{"class":501},[420,4739,3589],{"class":501},[420,4741,795],{"class":794},[420,4743,4745],{"class":4744},"sJhdN","Content-Type",[420,4747,2793],{"class":794},[420,4749,520],{"class":501},[420,4751,795],{"class":794},[420,4753,4754],{"class":523},"application/json",[420,4756,2793],{"class":794},[420,4758,4759],{"class":501}," },\n",[420,4761,4762,4765,4767,4770,4772,4775,4777,4779,4781],{"class":422,"line":1076},[420,4763,4764],{"class":3592},"      body",[420,4766,520],{"class":501},[420,4768,4769],{"class":3525}," JSON",[420,4771,3535],{"class":501},[420,4773,4774],{"class":3543},"stringify",[420,4776,3547],{"class":3592},[420,4778,4602],{"class":2442},[420,4780,3573],{"class":3592},[420,4782,3978],{"class":501},[420,4784,4785,4788],{"class":422,"line":1082},[420,4786,4787],{"class":501},"    }",[420,4789,3553],{"class":3592},[420,4791,4792,4794,4797,4799,4801,4803,4805,4808],{"class":422,"line":1089},[420,4793,3682],{"class":3521},[420,4795,4796],{"class":3525}," text",[420,4798,3529],{"class":2478},[420,4800,4703],{"class":1396},[420,4802,4698],{"class":2442},[420,4804,3535],{"class":501},[420,4806,4807],{"class":3543},"text",[420,4809,4810],{"class":3592},"()\n",[420,4812,4813,4815,4817,4819,4821,4823,4826,4828,4830,4832,4834,4837,4839,4841],{"class":422,"line":1099},[420,4814,4647],{"class":2442},[420,4816,3535],{"class":501},[420,4818,4652],{"class":3543},[420,4820,3547],{"class":3592},[420,4822,2793],{"class":794},[420,4824,4825],{"class":523},"[wechat-notify] response:",[420,4827,2793],{"class":794},[420,4829,3601],{"class":501},[420,4831,4698],{"class":2442},[420,4833,3535],{"class":501},[420,4835,4836],{"class":2442},"status",[420,4838,3601],{"class":501},[420,4840,4796],{"class":2442},[420,4842,3553],{"class":3592},[420,4844,4845,4847,4849,4852,4854,4856,4858,4860,4862,4865,4867,4869],{"class":422,"line":1107},[420,4846,4668],{"class":1396},[420,4848,3589],{"class":501},[420,4850,4851],{"class":3592}," status",[420,4853,520],{"class":501},[420,4855,4698],{"class":2442},[420,4857,3535],{"class":501},[420,4859,4836],{"class":2442},[420,4861,3601],{"class":501},[420,4863,4864],{"class":3592}," body",[420,4866,520],{"class":501},[420,4868,4796],{"class":2442},[420,4870,3630],{"class":501},[420,4872,4873],{"class":422,"line":1115},[420,4874,3858],{"class":501},[420,4876,4877,4880,4882,4885,4887],{"class":422,"line":1123},[420,4878,4879],{"class":1396},"  catch",[420,4881,3638],{"class":3592},[420,4883,4884],{"class":2442},"e",[420,4886,3674],{"class":3592},[420,4888,3677],{"class":501},[420,4890,4891,4893,4895,4898,4900,4902,4905,4907,4909,4912,4914,4916,4918,4921,4923,4925,4927,4929,4931,4933],{"class":422,"line":1131},[420,4892,4647],{"class":2442},[420,4894,3535],{"class":501},[420,4896,4897],{"class":3543},"error",[420,4899,3547],{"class":3592},[420,4901,2793],{"class":794},[420,4903,4904],{"class":523},"[wechat-notify] error:",[420,4906,2793],{"class":794},[420,4908,3601],{"class":501},[420,4910,4911],{"class":2442}," e",[420,4913,2802],{"class":2478},[420,4915,4911],{"class":2442},[420,4917,3535],{"class":501},[420,4919,4920],{"class":2442},"message",[420,4922,3913],{"class":2478},[420,4924,4911],{"class":2442},[420,4926,3535],{"class":501},[420,4928,4920],{"class":2442},[420,4930,3918],{"class":2478},[420,4932,4911],{"class":2442},[420,4934,3553],{"class":3592},[420,4936,4937,4939,4941,4944,4946,4948],{"class":422,"line":1139},[420,4938,4668],{"class":1396},[420,4940,3589],{"class":501},[420,4942,4943],{"class":3592}," error",[420,4945,520],{"class":501},[420,4947,4678],{"class":1220},[420,4949,3630],{"class":501},[420,4951,4952],{"class":422,"line":1149},[420,4953,3858],{"class":501},[420,4955,4956],{"class":422,"line":1157},[420,4957,3871],{"class":501},[420,4959,4960],{"class":422,"line":1168},[420,4961,592],{"emptyLinePlaceholder":591},[420,4963,4964,4966,4969,4972,4974,4976,4978,4980,4982,4984,4986,4989],{"class":422,"line":1176},[420,4965,3562],{"class":3521},[420,4967,4968],{"class":3543}," buildContentMarkdown",[420,4970,4971],{"class":501},"({",[420,4973,3593],{"class":3570},[420,4975,3601],{"class":501},[420,4977,3604],{"class":3570},[420,4979,3601],{"class":501},[420,4981,3613],{"class":3570},[420,4983,3601],{"class":501},[420,4985,3623],{"class":3570},[420,4987,4988],{"class":501}," })",[420,4990,3576],{"class":501},[420,4992,4993,4995,4998,5000,5002,5004,5007,5009,5011,5013,5016,5018,5021,5023,5025,5027,5029,5031,5034,5036],{"class":422,"line":1183},[420,4994,3581],{"class":3521},[420,4996,4997],{"class":3525}," CI_MERGE_REQUEST_PROJECT_URL",[420,4999,3529],{"class":2478},[420,5001,4296],{"class":794},[420,5003,2873],{"class":4299},[420,5005,5006],{"class":2442},"process",[420,5008,3535],{"class":3419},[420,5010,4622],{"class":2442},[420,5012,3535],{"class":3419},[420,5014,5015],{"class":3525},"CI_MERGE_REQUEST_PROJECT_URL",[420,5017,2675],{"class":4299},[420,5019,5020],{"class":523},"/-/merge_requests/",[420,5022,2873],{"class":4299},[420,5024,5006],{"class":2442},[420,5026,3535],{"class":3419},[420,5028,4622],{"class":2442},[420,5030,3535],{"class":3419},[420,5032,5033],{"class":3525},"CI_MERGE_REQUEST_IID",[420,5035,2675],{"class":4299},[420,5037,4352],{"class":794},[420,5039,5040,5042,5044,5046,5048,5050,5052,5054],{"class":422,"line":1194},[420,5041,3581],{"class":3521},[420,5043,2452],{"class":3525},[420,5045,3529],{"class":2478},[420,5047,3532],{"class":2442},[420,5049,3535],{"class":501},[420,5051,4622],{"class":2442},[420,5053,3535],{"class":501},[420,5055,5056],{"class":3525},"DEPLOY_HOST\n",[420,5058,5059,5061,5063,5065,5067,5069,5071,5073],{"class":422,"line":1201},[420,5060,3581],{"class":3521},[420,5062,2455],{"class":3525},[420,5064,3529],{"class":2478},[420,5066,3532],{"class":2442},[420,5068,3535],{"class":501},[420,5070,4622],{"class":2442},[420,5072,3535],{"class":501},[420,5074,5075],{"class":3525},"DEPLOY_DIR\n",[420,5077,5078,5080,5082,5084,5086,5088,5090,5092],{"class":422,"line":1212},[420,5079,3581],{"class":3521},[420,5081,3170],{"class":3525},[420,5083,3529],{"class":2478},[420,5085,3532],{"class":2442},[420,5087,3535],{"class":501},[420,5089,4622],{"class":2442},[420,5091,3535],{"class":501},[420,5093,5094],{"class":3525},"BUILD_DIR\n",[420,5096,5097,5099,5102,5104,5106,5108,5110,5112],{"class":422,"line":1224},[420,5098,3581],{"class":3521},[420,5100,5101],{"class":3525}," ZIP_ARTIFACT_URL",[420,5103,3529],{"class":2478},[420,5105,3532],{"class":2442},[420,5107,3535],{"class":501},[420,5109,4622],{"class":2442},[420,5111,3535],{"class":501},[420,5113,5114],{"class":3525},"ZIP_ARTIFACT_URL\n",[420,5116,5117],{"class":422,"line":1229},[420,5118,592],{"emptyLinePlaceholder":591},[420,5120,5121],{"class":422,"line":1235},[420,5122,5123],{"class":491},"  // 提交者\n",[420,5125,5126,5128,5131,5133,5135,5137,5139,5141,5143,5146,5148,5150,5152,5154,5157],{"class":422,"line":1243},[420,5127,3581],{"class":3521},[420,5129,5130],{"class":3525}," author",[420,5132,3529],{"class":2478},[420,5134,3638],{"class":3592},[420,5136,5006],{"class":2442},[420,5138,3535],{"class":501},[420,5140,4622],{"class":2442},[420,5142,3535],{"class":501},[420,5144,5145],{"class":3525},"GITLAB_USER_NAME",[420,5147,4150],{"class":2478},[420,5149,3598],{"class":794},[420,5151,3573],{"class":3592},[420,5153,3535],{"class":501},[420,5155,5156],{"class":3543},"trim",[420,5158,4810],{"class":3592},[420,5160,5161],{"class":422,"line":1252},[420,5162,5163],{"class":491},"  // 审核者\n",[420,5165,5166,5168,5171,5173,5175,5177,5179,5182,5184,5186,5188,5191,5193,5195,5197,5200],{"class":422,"line":1262},[420,5167,3581],{"class":3521},[420,5169,5170],{"class":3525}," reviewers",[420,5172,3529],{"class":2478},[420,5174,5130],{"class":2442},[420,5176,3711],{"class":2478},[420,5178,795],{"class":794},[420,5180,5181],{"class":523},"张三",[420,5183,2793],{"class":794},[420,5185,3913],{"class":2478},[420,5187,795],{"class":794},[420,5189,5190],{"class":523},"reviewer1",[420,5192,2793],{"class":794},[420,5194,3918],{"class":2478},[420,5196,795],{"class":794},[420,5198,5199],{"class":523},"reviewer2",[420,5201,801],{"class":794},[420,5203,5204],{"class":422,"line":1270},[420,5205,592],{"emptyLinePlaceholder":591},[420,5207,5208],{"class":422,"line":1281},[420,5209,5210],{"class":491},"  // 选择 @ 成员（即 userid）\n",[420,5212,5213,5215,5218,5220],{"class":422,"line":1292},[420,5214,3581],{"class":3521},[420,5216,5217],{"class":3525}," authorMap",[420,5219,3529],{"class":2478},[420,5221,3576],{"class":501},[420,5223,5224,5227,5229,5231,5234,5236],{"class":422,"line":1303},[420,5225,5226],{"class":3592},"    张三",[420,5228,520],{"class":501},[420,5230,795],{"class":794},[420,5232,5233],{"class":523},"zhang.san",[420,5235,2793],{"class":794},[420,5237,3978],{"class":501},[420,5239,5240,5243,5245,5247,5250,5252],{"class":422,"line":1318},[420,5241,5242],{"class":3592},"    李四",[420,5244,520],{"class":501},[420,5246,795],{"class":794},[420,5248,5249],{"class":523},"li.si",[420,5251,2793],{"class":794},[420,5253,3978],{"class":501},[420,5255,5256,5259,5261,5263,5266,5268],{"class":422,"line":1329},[420,5257,5258],{"class":3592},"    王五",[420,5260,520],{"class":501},[420,5262,795],{"class":794},[420,5264,5265],{"class":523},"wang.wu",[420,5267,2793],{"class":794},[420,5269,3978],{"class":501},[420,5271,5272,5275,5277,5279,5282,5284],{"class":422,"line":1337},[420,5273,5274],{"class":3592},"    赵六",[420,5276,520],{"class":501},[420,5278,795],{"class":794},[420,5280,5281],{"class":523},"zhao.liu",[420,5283,2793],{"class":794},[420,5285,3978],{"class":501},[420,5287,5288,5291,5293,5295,5298,5300],{"class":422,"line":1352},[420,5289,5290],{"class":3592},"    孙七",[420,5292,520],{"class":501},[420,5294,795],{"class":794},[420,5296,5297],{"class":523},"sun.qi",[420,5299,2793],{"class":794},[420,5301,3978],{"class":501},[420,5303,5304,5307,5309,5311,5314,5316],{"class":422,"line":1359},[420,5305,5306],{"class":3592},"    周八",[420,5308,520],{"class":501},[420,5310,795],{"class":794},[420,5312,5313],{"class":523},"zhou.ba",[420,5315,2793],{"class":794},[420,5317,3978],{"class":501},[420,5319,5320],{"class":422,"line":1367},[420,5321,3858],{"class":501},[420,5323,5324],{"class":422,"line":1375},[420,5325,592],{"emptyLinePlaceholder":591},[420,5327,5328],{"class":422,"line":1383},[420,5329,5330],{"class":491},"  // 时间计算\n",[420,5332,5333,5335,5338,5340,5342,5344,5346,5348,5351,5353,5355,5357,5360,5362,5365],{"class":422,"line":1391},[420,5334,3581],{"class":3521},[420,5336,5337],{"class":3525}," startISO",[420,5339,3529],{"class":2478},[420,5341,3532],{"class":2442},[420,5343,3535],{"class":501},[420,5345,4622],{"class":2442},[420,5347,3535],{"class":501},[420,5349,5350],{"class":3525},"CI_PIPELINE_CREATED_AT",[420,5352,4150],{"class":2478},[420,5354,3921],{"class":2478},[420,5356,3910],{"class":3543},[420,5358,5359],{"class":3592},"()",[420,5361,3535],{"class":501},[420,5363,5364],{"class":3543},"toISOString",[420,5366,4810],{"class":3592},[420,5368,5369,5371,5374,5376,5378,5380,5382,5385],{"class":422,"line":1400},[420,5370,3581],{"class":3521},[420,5372,5373],{"class":3525}," start",[420,5375,3529],{"class":2478},[420,5377,3921],{"class":2478},[420,5379,3910],{"class":3543},[420,5381,3547],{"class":3592},[420,5383,5384],{"class":2442},"startISO",[420,5386,3553],{"class":3592},[420,5388,5389,5391,5394,5396,5398,5400],{"class":422,"line":1406},[420,5390,3581],{"class":3521},[420,5392,5393],{"class":3525}," now",[420,5395,3529],{"class":2478},[420,5397,3921],{"class":2478},[420,5399,3910],{"class":3543},[420,5401,4810],{"class":3592},[420,5403,5404,5406,5409,5411,5413,5416,5419,5421,5423,5425],{"class":422,"line":1412},[420,5405,3581],{"class":3521},[420,5407,5408],{"class":3525}," elapsedSec",[420,5410,3529],{"class":2478},[420,5412,3638],{"class":3592},[420,5414,5415],{"class":2442},"now",[420,5417,5418],{"class":2478}," -",[420,5420,5373],{"class":2442},[420,5422,3674],{"class":3592},[420,5424,3014],{"class":2478},[420,5426,5427],{"class":707}," 1000\n",[420,5429,5430],{"class":422,"line":1418},[420,5431,592],{"emptyLinePlaceholder":591},[420,5433,5434],{"class":422,"line":1424},[420,5435,5436],{"class":491},"  // 状态处理（失败优先）\n",[420,5438,5439,5441,5444,5446,5449],{"class":422,"line":1430},[420,5440,3581],{"class":3521},[420,5442,5443],{"class":3525}," isFailed",[420,5445,3529],{"class":2478},[420,5447,5448],{"class":2478}," !!",[420,5450,5451],{"class":2442},"failed\n",[420,5453,5454,5456,5459,5461,5463,5465,5467,5469],{"class":422,"line":1436},[420,5455,3581],{"class":3521},[420,5457,5458],{"class":3525}," isSuccess",[420,5460,3529],{"class":2478},[420,5462,5448],{"class":2478},[420,5464,3815],{"class":2442},[420,5466,2802],{"class":2478},[420,5468,2711],{"class":2478},[420,5470,5451],{"class":2442},[420,5472,5473],{"class":422,"line":1442},[420,5474,592],{"emptyLinePlaceholder":591},[420,5476,5477],{"class":422,"line":1448},[420,5478,5479],{"class":491},"  // 标题与基础信息\n",[420,5481,5482,5484,5487,5489,5491,5494,5496,5498,5500,5502,5504,5507,5509,5512,5514,5516,5518],{"class":422,"line":1454},[420,5483,3581],{"class":3521},[420,5485,5486],{"class":3525}," title",[420,5488,3529],{"class":2478},[420,5490,4296],{"class":794},[420,5492,5493],{"class":523},"\u003Cfont color=\"info\">【",[420,5495,2873],{"class":4299},[420,5497,5006],{"class":2442},[420,5499,3535],{"class":3419},[420,5501,4622],{"class":2442},[420,5503,3535],{"class":3419},[420,5505,5506],{"class":3525},"CI_PROJECT_TITLE",[420,5508,2675],{"class":4299},[420,5510,5511],{"class":523},"】\u003C/font> ",[420,5513,2873],{"class":4299},[420,5515,3773],{"class":2442},[420,5517,2675],{"class":4299},[420,5519,4352],{"class":794},[420,5521,5522,5524,5527,5529],{"class":422,"line":1462},[420,5523,3581],{"class":3521},[420,5525,5526],{"class":3525}," lines",[420,5528,3529],{"class":2478},[420,5530,5531],{"class":3592}," []\n",[420,5533,5534,5537,5539,5542,5544,5547],{"class":422,"line":1469},[420,5535,5536],{"class":2442},"  lines",[420,5538,3535],{"class":501},[420,5540,5541],{"class":3543},"push",[420,5543,3547],{"class":3592},[420,5545,5546],{"class":2442},"title",[420,5548,3553],{"class":3592},[420,5550,5551],{"class":422,"line":1477},[420,5552,592],{"emptyLinePlaceholder":591},[420,5554,5555],{"class":422,"line":1484},[420,5556,5557],{"class":491},"  // 公共信息区块\n",[420,5559,5560,5562,5564,5566,5568,5571,5574,5576,5579,5581,5584,5586],{"class":422,"line":1491},[420,5561,5536],{"class":2442},[420,5563,3535],{"class":501},[420,5565,5541],{"class":3543},[420,5567,3547],{"class":3592},[420,5569,5570],{"class":794},"`",[420,5572,5573],{"class":523},"> 提交者：\u003Cfont color=\"comment\">",[420,5575,2873],{"class":4299},[420,5577,5578],{"class":2442},"author",[420,5580,2675],{"class":4299},[420,5582,5583],{"class":523},"\u003C/font>",[420,5585,5570],{"class":794},[420,5587,3553],{"class":3592},[420,5589,5590],{"class":422,"line":1497},[420,5591,592],{"emptyLinePlaceholder":591},[420,5593,5594],{"class":422,"line":1503},[420,5595,5596],{"class":491},"  // 类型分支逻辑\n",[420,5598,5599,5601,5603,5605,5607,5609,5612,5614,5616],{"class":422,"line":1509},[420,5600,2472],{"class":1396},[420,5602,3638],{"class":3592},[420,5604,3730],{"class":2442},[420,5606,3711],{"class":2478},[420,5608,795],{"class":794},[420,5610,5611],{"class":523},"CI-start",[420,5613,2793],{"class":794},[420,5615,3674],{"class":3592},[420,5617,3677],{"class":501},[420,5619,5620,5623,5625,5627,5629,5631,5634,5636,5639,5642,5645,5647,5649,5651,5653],{"class":422,"line":1515},[420,5621,5622],{"class":2442},"    lines",[420,5624,3535],{"class":501},[420,5626,5541],{"class":3543},[420,5628,3547],{"class":3592},[420,5630,5570],{"class":794},[420,5632,5633],{"class":523},"> 开始时间：\u003Cfont color=\"comment\">",[420,5635,2873],{"class":4299},[420,5637,5638],{"class":3543},"formatShanghai",[420,5640,3547],{"class":5641},"s-euU",[420,5643,5644],{"class":2442},"start",[420,5646,3573],{"class":5641},[420,5648,2675],{"class":4299},[420,5650,5583],{"class":523},[420,5652,5570],{"class":794},[420,5654,3553],{"class":3592},[420,5656,5657,5659,5661,5663,5665,5667,5670,5672,5675,5677,5680,5682,5684,5686,5688,5690],{"class":422,"line":1521},[420,5658,5622],{"class":2442},[420,5660,3535],{"class":501},[420,5662,5541],{"class":3543},[420,5664,3547],{"class":3592},[420,5666,5570],{"class":794},[420,5668,5669],{"class":523},"\u003C@",[420,5671,2873],{"class":4299},[420,5673,5674],{"class":2442},"reviewers",[420,5676,2675],{"class":4299},[420,5678,5679],{"class":523},"> [查看合并请求](",[420,5681,2873],{"class":4299},[420,5683,5015],{"class":3525},[420,5685,2675],{"class":4299},[420,5687,3573],{"class":523},[420,5689,5570],{"class":794},[420,5691,3553],{"class":3592},[420,5693,5694],{"class":422,"line":1527},[420,5695,3858],{"class":501},[420,5697,5698,5701,5703,5705,5707,5709,5711,5714,5716,5718],{"class":422,"line":1536},[420,5699,5700],{"class":1396},"  else",[420,5702,517],{"class":1396},[420,5704,3638],{"class":3592},[420,5706,3730],{"class":2442},[420,5708,3711],{"class":2478},[420,5710,795],{"class":794},[420,5712,5713],{"class":523},"CI-end",[420,5715,2793],{"class":794},[420,5717,3674],{"class":3592},[420,5719,3677],{"class":501},[420,5721,5722,5724,5726,5728,5730,5732,5735,5737,5739,5741,5743,5745,5747,5750,5752,5754,5756,5758,5760,5762,5764,5766],{"class":422,"line":1543},[420,5723,5622],{"class":2442},[420,5725,3535],{"class":501},[420,5727,5541],{"class":3543},[420,5729,3547],{"class":3592},[420,5731,5570],{"class":794},[420,5733,5734],{"class":523},"> 开始-结束时间：\u003Cfont color=\"comment\">",[420,5736,2873],{"class":4299},[420,5738,5638],{"class":3543},[420,5740,3547],{"class":5641},[420,5742,5644],{"class":2442},[420,5744,3573],{"class":5641},[420,5746,2675],{"class":4299},[420,5748,5749],{"class":523}," 至 ",[420,5751,2873],{"class":4299},[420,5753,5638],{"class":3543},[420,5755,3547],{"class":5641},[420,5757,5415],{"class":2442},[420,5759,3573],{"class":5641},[420,5761,2675],{"class":4299},[420,5763,5583],{"class":523},[420,5765,5570],{"class":794},[420,5767,3553],{"class":3592},[420,5769,5770,5772,5774,5776,5778,5780,5783,5785,5788,5790,5793,5795,5797,5799,5801],{"class":422,"line":1554},[420,5771,5622],{"class":2442},[420,5773,3535],{"class":501},[420,5775,5541],{"class":3543},[420,5777,3547],{"class":3592},[420,5779,5570],{"class":794},[420,5781,5782],{"class":523},"> 总耗时：\u003Cfont color=\"comment\">",[420,5784,2873],{"class":4299},[420,5786,5787],{"class":3543},"formatHMS",[420,5789,3547],{"class":5641},[420,5791,5792],{"class":2442},"elapsedSec",[420,5794,3573],{"class":5641},[420,5796,2675],{"class":4299},[420,5798,5583],{"class":523},[420,5800,5570],{"class":794},[420,5802,3553],{"class":3592},[420,5804,5805,5807,5809,5812,5814],{"class":422,"line":1559},[420,5806,3703],{"class":1396},[420,5808,3638],{"class":3592},[420,5810,5811],{"class":2442},"isSuccess",[420,5813,3674],{"class":3592},[420,5815,3677],{"class":501},[420,5817,5818,5821,5823,5825,5827,5829,5832,5834],{"class":422,"line":1565},[420,5819,5820],{"class":2442},"      lines",[420,5822,3535],{"class":501},[420,5824,5541],{"class":3543},[420,5826,3547],{"class":3592},[420,5828,5570],{"class":794},[420,5830,5831],{"class":523},"> 状态：\u003Cfont color=\"info\">成功\u003C/font> 🎉",[420,5833,5570],{"class":794},[420,5835,3553],{"class":3592},[420,5837,5838,5840,5842,5844,5846,5848,5850,5852,5854,5856,5858,5860,5862,5864,5866,5868],{"class":422,"line":1573},[420,5839,5820],{"class":2442},[420,5841,3535],{"class":501},[420,5843,5541],{"class":3543},[420,5845,3547],{"class":3592},[420,5847,5570],{"class":794},[420,5849,5669],{"class":523},[420,5851,2873],{"class":4299},[420,5853,5674],{"class":2442},[420,5855,2675],{"class":4299},[420,5857,5679],{"class":523},[420,5859,2873],{"class":4299},[420,5861,5015],{"class":3525},[420,5863,2675],{"class":4299},[420,5865,3573],{"class":523},[420,5867,5570],{"class":794},[420,5869,3553],{"class":3592},[420,5871,5872],{"class":422,"line":1582},[420,5873,5874],{"class":501},"    }\n",[420,5876,5877,5879,5881,5883,5886,5888],{"class":422,"line":1589},[420,5878,3747],{"class":1396},[420,5880,517],{"class":1396},[420,5882,3638],{"class":3592},[420,5884,5885],{"class":2442},"isFailed",[420,5887,3674],{"class":3592},[420,5889,3677],{"class":501},[420,5891,5892,5894,5896,5898,5900,5902,5905,5907],{"class":422,"line":1600},[420,5893,5820],{"class":2442},[420,5895,3535],{"class":501},[420,5897,5541],{"class":3543},[420,5899,3547],{"class":3592},[420,5901,5570],{"class":794},[420,5903,5904],{"class":523},"> 状态：\u003Cfont color=\"warning\">失败\u003C/font> 😭",[420,5906,5570],{"class":794},[420,5908,3553],{"class":3592},[420,5910,5911,5913,5915,5917,5919,5921,5923,5925,5928,5930,5932,5935,5937,5940,5942,5944,5946,5948,5950,5952,5954,5956,5958],{"class":422,"line":1607},[420,5912,5820],{"class":2442},[420,5914,3535],{"class":501},[420,5916,5541],{"class":3543},[420,5918,3547],{"class":3592},[420,5920,5570],{"class":794},[420,5922,5669],{"class":523},[420,5924,2873],{"class":4299},[420,5926,5927],{"class":2442},"authorMap",[420,5929,3692],{"class":5641},[420,5931,5578],{"class":2442},[420,5933,5934],{"class":5641},"]",[420,5936,2675],{"class":4299},[420,5938,5939],{"class":523},"> \u003C@",[420,5941,2873],{"class":4299},[420,5943,5674],{"class":2442},[420,5945,2675],{"class":4299},[420,5947,5679],{"class":523},[420,5949,2873],{"class":4299},[420,5951,5015],{"class":3525},[420,5953,2675],{"class":4299},[420,5955,3573],{"class":523},[420,5957,5570],{"class":794},[420,5959,3553],{"class":3592},[420,5961,5962],{"class":422,"line":1615},[420,5963,5874],{"class":501},[420,5965,5966],{"class":422,"line":1626},[420,5967,3858],{"class":501},[420,5969,5970,5972,5974,5976,5978,5980,5982,5985,5987,5989],{"class":422,"line":1631},[420,5971,5700],{"class":1396},[420,5973,517],{"class":1396},[420,5975,3638],{"class":3592},[420,5977,3730],{"class":2442},[420,5979,3711],{"class":2478},[420,5981,795],{"class":794},[420,5983,5984],{"class":523},"deploy-start",[420,5986,2793],{"class":794},[420,5988,3674],{"class":3592},[420,5990,3677],{"class":501},[420,5992,5993,5995,5997,5999,6001,6003,6005,6007,6009,6011,6013,6015,6017,6019,6021],{"class":422,"line":1637},[420,5994,5622],{"class":2442},[420,5996,3535],{"class":501},[420,5998,5541],{"class":3543},[420,6000,3547],{"class":3592},[420,6002,5570],{"class":794},[420,6004,5633],{"class":523},[420,6006,2873],{"class":4299},[420,6008,5638],{"class":3543},[420,6010,3547],{"class":5641},[420,6012,5644],{"class":2442},[420,6014,3573],{"class":5641},[420,6016,2675],{"class":4299},[420,6018,5583],{"class":523},[420,6020,5570],{"class":794},[420,6022,3553],{"class":3592},[420,6024,6025,6027,6029,6031,6033,6035,6038,6040,6042,6044,6046,6048],{"class":422,"line":1645},[420,6026,5622],{"class":2442},[420,6028,3535],{"class":501},[420,6030,5541],{"class":3543},[420,6032,3547],{"class":3592},[420,6034,5570],{"class":794},[420,6036,6037],{"class":523},"> 打包目录：\u003Cfont color=\"comment\">",[420,6039,2873],{"class":4299},[420,6041,2607],{"class":3525},[420,6043,2675],{"class":4299},[420,6045,5583],{"class":523},[420,6047,5570],{"class":794},[420,6049,3553],{"class":3592},[420,6051,6052,6054,6056,6058,6060,6062,6065,6067,6069,6071,6073,6075],{"class":422,"line":1654},[420,6053,5622],{"class":2442},[420,6055,3535],{"class":501},[420,6057,5541],{"class":3543},[420,6059,3547],{"class":3592},[420,6061,5570],{"class":794},[420,6063,6064],{"class":523},"> 目标主机：\u003Cfont color=\"comment\">",[420,6066,2873],{"class":4299},[420,6068,2917],{"class":3525},[420,6070,2675],{"class":4299},[420,6072,5583],{"class":523},[420,6074,5570],{"class":794},[420,6076,3553],{"class":3592},[420,6078,6079,6081,6083,6085,6087,6089,6092,6094,6096,6098,6100,6102],{"class":422,"line":1661},[420,6080,5622],{"class":2442},[420,6082,3535],{"class":501},[420,6084,5541],{"class":3543},[420,6086,3547],{"class":3592},[420,6088,5570],{"class":794},[420,6090,6091],{"class":523},"> 目标目录：\u003Cfont color=\"comment\">",[420,6093,2873],{"class":4299},[420,6095,2929],{"class":3525},[420,6097,2675],{"class":4299},[420,6099,5583],{"class":523},[420,6101,5570],{"class":794},[420,6103,3553],{"class":3592},[420,6105,6106],{"class":422,"line":1672},[420,6107,3858],{"class":501},[420,6109,6110,6112,6114,6116,6118,6120,6122,6125,6127,6129,6131,6133,6135,6138,6140,6142],{"class":422,"line":1679},[420,6111,5700],{"class":1396},[420,6113,517],{"class":1396},[420,6115,3638],{"class":3592},[420,6117,3730],{"class":2442},[420,6119,3711],{"class":2478},[420,6121,795],{"class":794},[420,6123,6124],{"class":523},"deploy-end",[420,6126,2793],{"class":794},[420,6128,4150],{"class":2478},[420,6130,3593],{"class":2442},[420,6132,3711],{"class":2478},[420,6134,795],{"class":794},[420,6136,6137],{"class":523},"deploy:prod-end",[420,6139,2793],{"class":794},[420,6141,3674],{"class":3592},[420,6143,3677],{"class":501},[420,6145,6146,6148,6150,6152,6154,6156,6158,6160,6162,6164,6166,6168,6170,6172,6174,6176,6178,6180,6182,6184,6186,6188],{"class":422,"line":1687},[420,6147,5622],{"class":2442},[420,6149,3535],{"class":501},[420,6151,5541],{"class":3543},[420,6153,3547],{"class":3592},[420,6155,5570],{"class":794},[420,6157,5734],{"class":523},[420,6159,2873],{"class":4299},[420,6161,5638],{"class":3543},[420,6163,3547],{"class":5641},[420,6165,5644],{"class":2442},[420,6167,3573],{"class":5641},[420,6169,2675],{"class":4299},[420,6171,5749],{"class":523},[420,6173,2873],{"class":4299},[420,6175,5638],{"class":3543},[420,6177,3547],{"class":5641},[420,6179,5415],{"class":2442},[420,6181,3573],{"class":5641},[420,6183,2675],{"class":4299},[420,6185,5583],{"class":523},[420,6187,5570],{"class":794},[420,6189,3553],{"class":3592},[420,6191,6192,6194,6196,6198,6200,6202,6204,6206,6208,6210,6212,6214,6216,6218,6220],{"class":422,"line":1696},[420,6193,5622],{"class":2442},[420,6195,3535],{"class":501},[420,6197,5541],{"class":3543},[420,6199,3547],{"class":3592},[420,6201,5570],{"class":794},[420,6203,5782],{"class":523},[420,6205,2873],{"class":4299},[420,6207,5787],{"class":3543},[420,6209,3547],{"class":5641},[420,6211,5792],{"class":2442},[420,6213,3573],{"class":5641},[420,6215,2675],{"class":4299},[420,6217,5583],{"class":523},[420,6219,5570],{"class":794},[420,6221,3553],{"class":3592},[420,6223,6224,6226,6228,6231,6233],{"class":422,"line":1701},[420,6225,3703],{"class":1396},[420,6227,3638],{"class":3592},[420,6229,6230],{"class":3525},"ZIP_ARTIFACT_URL",[420,6232,3674],{"class":3592},[420,6234,3677],{"class":501},[420,6236,6237,6239,6241,6243,6245,6247,6250,6252,6254,6256,6258,6260],{"class":422,"line":1707},[420,6238,5820],{"class":2442},[420,6240,3535],{"class":501},[420,6242,5541],{"class":3543},[420,6244,3547],{"class":3592},[420,6246,5570],{"class":794},[420,6248,6249],{"class":523},"> [下载部署包](",[420,6251,2873],{"class":4299},[420,6253,6230],{"class":3525},[420,6255,2675],{"class":4299},[420,6257,3573],{"class":523},[420,6259,5570],{"class":794},[420,6261,3553],{"class":3592},[420,6263,6264],{"class":422,"line":1715},[420,6265,5874],{"class":501},[420,6267,6268,6270],{"class":422,"line":1724},[420,6269,3747],{"class":1396},[420,6271,3576],{"class":501},[420,6273,6274,6276,6278,6280,6282,6284,6286,6288,6290,6292,6294,6296,6298,6300,6302,6304,6306,6309,6311],{"class":422,"line":1731},[420,6275,5820],{"class":2442},[420,6277,3535],{"class":501},[420,6279,5541],{"class":3543},[420,6281,3547],{"class":3592},[420,6283,5570],{"class":794},[420,6285,5669],{"class":523},[420,6287,2873],{"class":4299},[420,6289,5927],{"class":2442},[420,6291,3692],{"class":5641},[420,6293,5578],{"class":2442},[420,6295,5934],{"class":5641},[420,6297,2675],{"class":4299},[420,6299,5939],{"class":523},[420,6301,2873],{"class":4299},[420,6303,5674],{"class":2442},[420,6305,2675],{"class":4299},[420,6307,6308],{"class":523},">",[420,6310,5570],{"class":794},[420,6312,3553],{"class":3592},[420,6314,6315],{"class":422,"line":1742},[420,6316,5874],{"class":501},[420,6318,6319],{"class":422,"line":1749},[420,6320,3858],{"class":501},[420,6322,6323,6325,6327,6329,6331,6333,6335,6338,6340,6342],{"class":422,"line":1757},[420,6324,5700],{"class":1396},[420,6326,517],{"class":1396},[420,6328,3638],{"class":3592},[420,6330,3730],{"class":2442},[420,6332,3711],{"class":2478},[420,6334,795],{"class":794},[420,6336,6337],{"class":523},"deploy:prod-start",[420,6339,2793],{"class":794},[420,6341,3674],{"class":3592},[420,6343,3677],{"class":501},[420,6345,6347,6349,6351,6353,6355,6357,6359,6361,6363,6365,6367,6369,6371,6373,6375],{"class":422,"line":6346},149,[420,6348,5622],{"class":2442},[420,6350,3535],{"class":501},[420,6352,5541],{"class":3543},[420,6354,3547],{"class":3592},[420,6356,5570],{"class":794},[420,6358,5633],{"class":523},[420,6360,2873],{"class":4299},[420,6362,5638],{"class":3543},[420,6364,3547],{"class":5641},[420,6366,5644],{"class":2442},[420,6368,3573],{"class":5641},[420,6370,2675],{"class":4299},[420,6372,5583],{"class":523},[420,6374,5570],{"class":794},[420,6376,3553],{"class":3592},[420,6378,6380,6382,6384,6386,6388,6390,6392,6394,6396,6398,6400,6402],{"class":422,"line":6379},150,[420,6381,5622],{"class":2442},[420,6383,3535],{"class":501},[420,6385,5541],{"class":3543},[420,6387,3547],{"class":3592},[420,6389,5570],{"class":794},[420,6391,6037],{"class":523},[420,6393,2873],{"class":4299},[420,6395,2607],{"class":3525},[420,6397,2675],{"class":4299},[420,6399,5583],{"class":523},[420,6401,5570],{"class":794},[420,6403,3553],{"class":3592},[420,6405,6407],{"class":422,"line":6406},151,[420,6408,3858],{"class":501},[420,6410,6412,6414,6416,6418,6420,6422,6425,6427,6429,6431,6433,6435,6438,6440,6442,6444],{"class":422,"line":6411},152,[420,6413,5536],{"class":2442},[420,6415,3535],{"class":501},[420,6417,5541],{"class":3543},[420,6419,3547],{"class":3592},[420,6421,5570],{"class":794},[420,6423,6424],{"class":523},"> [查看流水线](",[420,6426,2873],{"class":4299},[420,6428,5006],{"class":2442},[420,6430,3535],{"class":3419},[420,6432,4622],{"class":2442},[420,6434,3535],{"class":3419},[420,6436,6437],{"class":3525},"CI_PIPELINE_URL",[420,6439,2675],{"class":4299},[420,6441,3573],{"class":523},[420,6443,5570],{"class":794},[420,6445,3553],{"class":3592},[420,6447,6449],{"class":422,"line":6448},153,[420,6450,592],{"emptyLinePlaceholder":591},[420,6452,6454,6456,6458,6460,6463,6465,6467,6470,6472],{"class":422,"line":6453},154,[420,6455,3863],{"class":1396},[420,6457,5526],{"class":2442},[420,6459,3535],{"class":501},[420,6461,6462],{"class":3543},"join",[420,6464,3547],{"class":3592},[420,6466,2793],{"class":794},[420,6468,6469],{"class":2979},"\\n",[420,6471,2793],{"class":794},[420,6473,3553],{"class":3592},[420,6475,6477],{"class":422,"line":6476},155,[420,6478,3871],{"class":501},[420,6480,6482],{"class":422,"line":6481},156,[420,6483,592],{"emptyLinePlaceholder":591},[420,6485,6487,6489,6491,6494,6496],{"class":422,"line":6486},157,[420,6488,4591],{"class":2833},[420,6490,4594],{"class":3521},[420,6492,6493],{"class":3543}," main",[420,6495,5359],{"class":501},[420,6497,3576],{"class":501},[420,6499,6501,6503,6505,6507,6509,6511,6513,6515,6517,6519,6522,6524,6526,6528,6531],{"class":422,"line":6500},158,[420,6502,3581],{"class":3521},[420,6504,3589],{"class":501},[420,6506,3593],{"class":3525},[420,6508,3601],{"class":501},[420,6510,3604],{"class":3525},[420,6512,3601],{"class":501},[420,6514,3613],{"class":3525},[420,6516,3601],{"class":501},[420,6518,3623],{"class":3525},[420,6520,6521],{"class":501}," }",[420,6523,3529],{"class":2478},[420,6525,3565],{"class":3543},[420,6527,3547],{"class":3592},[420,6529,6530],{"class":2442},"args",[420,6532,3553],{"class":3592},[420,6534,6536,6538,6540,6542,6544,6546],{"class":422,"line":6535},159,[420,6537,2472],{"class":1396},[420,6539,3638],{"class":3592},[420,6541,2485],{"class":2478},[420,6543,3730],{"class":2442},[420,6545,3674],{"class":3592},[420,6547,3677],{"class":501},[420,6549,6551,6553,6555,6557,6559,6561,6564,6566],{"class":422,"line":6550},160,[420,6552,4647],{"class":2442},[420,6554,3535],{"class":501},[420,6556,4652],{"class":3543},[420,6558,3547],{"class":3592},[420,6560,2793],{"class":794},[420,6562,6563],{"class":523},"[wechat-notify] no --type provided, skip.",[420,6565,2793],{"class":794},[420,6567,3553],{"class":3592},[420,6569,6571],{"class":422,"line":6570},161,[420,6572,6573],{"class":1396},"    return\n",[420,6575,6577],{"class":422,"line":6576},162,[420,6578,3858],{"class":501},[420,6580,6582,6584,6587,6589,6591,6593,6596,6598,6600,6602,6604,6606,6608,6610,6612],{"class":422,"line":6581},163,[420,6583,3581],{"class":3521},[420,6585,6586],{"class":3525}," md",[420,6588,3529],{"class":2478},[420,6590,4968],{"class":3543},[420,6592,3547],{"class":3592},[420,6594,6595],{"class":501},"{",[420,6597,3593],{"class":2442},[420,6599,3601],{"class":501},[420,6601,3604],{"class":2442},[420,6603,3601],{"class":501},[420,6605,3613],{"class":2442},[420,6607,3601],{"class":501},[420,6609,3623],{"class":2442},[420,6611,6521],{"class":501},[420,6613,3553],{"class":3592},[420,6615,6617,6620,6622,6624,6626,6629,6631,6633,6636,6638,6640,6643,6645,6647,6650,6652,6654,6656,6658],{"class":422,"line":6616},164,[420,6618,6619],{"class":1396},"  await",[420,6621,4597],{"class":3543},[420,6623,3547],{"class":3592},[420,6625,6595],{"class":501},[420,6627,6628],{"class":3592}," msgtype",[420,6630,520],{"class":501},[420,6632,795],{"class":794},[420,6634,6635],{"class":523},"markdown",[420,6637,2793],{"class":794},[420,6639,3601],{"class":501},[420,6641,6642],{"class":3592}," markdown",[420,6644,520],{"class":501},[420,6646,3589],{"class":501},[420,6648,6649],{"class":3592}," content",[420,6651,520],{"class":501},[420,6653,6586],{"class":2442},[420,6655,6521],{"class":501},[420,6657,6521],{"class":501},[420,6659,3553],{"class":3592},[420,6661,6663],{"class":422,"line":6662},165,[420,6664,3871],{"class":501},[420,6666,6668],{"class":422,"line":6667},166,[420,6669,592],{"emptyLinePlaceholder":591},[420,6671,6673,6676,6678,6680,6683,6685,6687,6689,6691,6693],{"class":422,"line":6672},167,[420,6674,6675],{"class":3543},"main",[420,6677,5359],{"class":2442},[420,6679,3535],{"class":501},[420,6681,6682],{"class":3543},"catch",[420,6684,3547],{"class":2442},[420,6686,3547],{"class":501},[420,6688,4884],{"class":3570},[420,6690,3573],{"class":501},[420,6692,4115],{"class":3521},[420,6694,3576],{"class":501},[420,6696,6698,6701,6703,6705,6707,6709,6712,6714,6716,6718],{"class":422,"line":6697},168,[420,6699,6700],{"class":2442},"  console",[420,6702,3535],{"class":501},[420,6704,4897],{"class":3543},[420,6706,3547],{"class":3592},[420,6708,2793],{"class":794},[420,6710,6711],{"class":523},"[wechat-notify] unexpected error:",[420,6713,2793],{"class":794},[420,6715,3601],{"class":501},[420,6717,4911],{"class":2442},[420,6719,3553],{"class":3592},[420,6721,6723,6725,6727,6729,6732,6734,6736,6738],{"class":422,"line":6722},169,[420,6724,2675],{"class":501},[420,6726,3573],{"class":2442},[420,6728,3535],{"class":501},[420,6730,6731],{"class":3543},"finally",[420,6733,3547],{"class":2442},[420,6735,5359],{"class":501},[420,6737,4115],{"class":3521},[420,6739,3576],{"class":501},[420,6741,6743],{"class":422,"line":6742},170,[420,6744,6745],{"class":491},"  // 不阻塞流水线\n",[420,6747,6749,6752,6754,6757,6759,6761],{"class":422,"line":6748},171,[420,6750,6751],{"class":2442},"  process",[420,6753,3535],{"class":501},[420,6755,6756],{"class":3543},"exit",[420,6758,3547],{"class":3592},[420,6760,4416],{"class":707},[420,6762,3553],{"class":3592},[420,6764,6766,6768],{"class":422,"line":6765},172,[420,6767,2675],{"class":501},[420,6769,3553],{"class":2442},[6771,6772,6773,6776],"tip",{},[305,6774,6775],{},"为了隔离不同环境的构建逻辑，采用了多脚本和动态配置的策略。",[343,6777,6778,6807],{},[346,6779,6780,6783,6784,6787,6788],{},[349,6781,6782],{},"构建脚本分离",": ",[323,6785,6786],{},"package.json"," 中定义了两个构建脚本：\n",[343,6789,6790,6799],{},[346,6791,6792,6794,6795,6798],{},[323,6793,335],{},": 用于 ",[323,6796,6797],{},"prod"," 环境，执行生产环境的完整构建。",[346,6800,6801,6794,6804,6806],{},[323,6802,6803],{},"build:dev",[323,6805,361],{}," 环境，执行测试环境的特定构建。",[346,6808,6809,6783,6812,6814,6815,6818,6819,6821,6822,362,6824,6826],{},[349,6810,6811],{},"动态加载配置",[323,6813,479],{}," 会根据 ",[323,6816,6817],{},"$BUILD_ENV"," 变量的值，通过 ",[323,6820,990],{}," 规则动态加载 ",[323,6823,1768],{},[323,6825,2148],{},"，从而执行对应环境的作业。",[406,6828,6829],{"id":6829},"全局环境变量",[6831,6832,6833,6847],"table",{},[6834,6835,6836],"thead",{},[6837,6838,6839,6844],"tr",{},[6840,6841,6843],"th",{"align":6842},"left","变量名",[6840,6845,6846],{"align":6842},"用途",[6848,6849,6850,6866,6875,6885,6895,6904],"tbody",{},[6837,6851,6852,6858],{},[6853,6854,6855],"td",{"align":6842},[323,6856,6857],{},"BUILD_ENV",[6853,6859,6860,6861,3014,6863,6865],{"align":6842},"控制构建环境 (",[323,6862,361],{},[323,6864,6797],{},")，流水线自动或手动选择",[6837,6867,6868,6872],{},[6853,6869,6870],{"align":6842},[323,6871,2607],{},[6853,6873,6874],{"align":6842},"指定构建产物的输出目录，根据项目调整",[6837,6876,6877,6882],{},[6853,6878,6879],{"align":6842},[323,6880,6881],{},"SONAR_HOST_URL",[6853,6883,6884],{"align":6842},"SonarQube 服务器地址",[6837,6886,6887,6892],{},[6853,6888,6889],{"align":6842},[323,6890,6891],{},"WECHAT_WEBHOOK_URL",[6853,6893,6894],{"align":6842},"企业微信 WebHook地址，用于通知",[6837,6896,6897,6901],{},[6853,6898,6899],{"align":6842},[323,6900,2917],{},[6853,6902,6903],{"align":6842},"部署目标服务器 IP 地址",[6837,6905,6906,6910],{},[6853,6907,6908],{"align":6842},[323,6909,2929],{},[6853,6911,6912],{"align":6842},"部署到服务器上的目标目录",[6914,6915,6916],"warning",{},[305,6917,6918,6920],{},[323,6919,2607],{}," 等变量需要根据不同项目进行修改，请确保其指向正确的构建产物目录。",[406,6922,6923],{"id":6923},"企业微信通知",[305,6925,6926],{},"流水线的关键节点会通过企业微信机器人发送实时通知。",[343,6928,6929,6937],{},[346,6930,6931,6783,6934,6936],{},[349,6932,6933],{},"通知脚本",[323,6935,3499],{}," 负责组装消息内容并发送。",[346,6938,6939,6942,6943,6946,6947,6950],{},[349,6940,6941],{},"@ 成员",": 在消息中可以使用 ",[323,6944,6945],{},"\u003C@userid>"," 的语法来提及指定成员，请确保填入的是成员的",[349,6948,6949],{},"账号 (userid)","，而不是手机号或姓名。",[305,6952,6953,6957],{},[381,6954],{"alt":6955,"src":6956},"ci 开始通知","/images/guides/platforms/gitlab-ci/ci-start-notify.png",[381,6958],{"alt":6959,"src":6960},"部署成功通知","/images/guides/platforms/gitlab-ci/deploy-end-success-notify.png",[296,6962,6963],{"id":6963},"手动执行流水线",[305,6965,6966],{},"除了自动化触发，你也可以手动运行流水线，并指定构建环境或者其他定义的全局变量。",[6968,6969,6970,6980,6987],"ol",{},[346,6971,6972,6973,326,6976,6979],{},"进入项目的 ",[323,6974,6975],{},"构建",[323,6977,6978],{},"流水线"," 页面。",[346,6981,6982,6983,6986],{},"点击 ",[323,6984,6985],{},"运行流水线"," 按钮。",[346,6988,6989,6990,6993,6994,6996,6997,362,6999,7001],{},"选择对应分支，在 ",[323,6991,6992],{},"变量"," 区域，",[323,6995,6857],{}," 变量会提供一个下拉框，你可以选择 ",[323,6998,361],{},[323,7000,6797],{}," 环境。",[305,7003,7004],{},[381,7005],{"alt":7006,"src":7007},"手动运行流水线","/images/guides/platforms/gitlab-ci/manual-run-pipeline.png",[296,7009,7011],{"id":7010},"常见问题-faq","常见问题 (FAQ)",[368,7013,7014],{},[7015,7016,7017,7067,7086,7113,7131,7143],"accordion",{},[7018,7019,7022,7039,7051,7054],"accordion-item",{"icon":7020,"label":7021},"i-lucide-circle-help","CI 脚本报错 `No such file or directory`，找不到构建产物目录？",[305,7023,7024,7025,7027,7028,7030,7031,7034,7035,7038],{},"这是因为 ",[323,7026,479],{}," 中的 ",[323,7029,2607],{}," 变量被配置为了",[349,7032,7033],{},"绝对路径"," (例如 ",[323,7036,7037],{},"/app/dist/...",")。",[300,7040,7041],{},[305,7042,7043,7044,7046,7047,7050],{},"CI Runner 的工作目录是 ",[323,7045,2700],{},"，构建产物路径应该是相对于该目录的",[349,7048,7049],{},"相对路径","。",[305,7052,7053],{},"解决方案:",[305,7055,7056,7057,7027,7059,7061,7062,7034,7064,7038],{},"修改 ",[323,7058,479],{},[323,7060,2607],{}," 变量，将其改为",[349,7063,7049],{},[323,7065,7066],{},"app/dist/...",[7018,7068,7070],{"icon":7020,"label":7069},"部署成功通知 (`notify-deploy-end-success`) 为什么在部署完成前就发送了？",[305,7071,7072,7073,7076,7077,7079,7080,7082,7083,7085],{},"因为该通知作业的 ",[323,7074,7075],{},"needs"," 依赖中只包含了 ",[323,7078,335],{}," 作业，而没有包含 ",[323,7081,338],{}," 作业，导致它在 ",[323,7084,335],{}," 完成后就立即执行。",[7018,7087,7089],{"icon":7020,"label":7088},"为什么合并到 `dev` 分支的 Merge Request 没有触发 `dev` 环境的构建和部署流程？",[305,7090,7091,7092,7094,7095,7097,7098,7100,7101,7103,7104,7106,7107,7050],{},"因为 ",[323,7093,1768],{}," 的 ",[323,7096,990],{}," 规则依赖于 ",[323,7099,6817],{}," 变量，但在自动触发的 MR 流水线中，定义在 ",[323,7102,479],{}," 文件内部的 ",[323,7105,672],{}," ",[349,7108,7109,7110,7112],{},"在 ",[323,7111,990],{}," 解析阶段是不可用的",[7018,7114,7116],{"icon":7020,"label":7115},"部署时，服务器上只出现了 `dist` 目录里的文件，而没有包含父文件夹？",[305,7117,7118,7119,7122,7123,7126,7127,7130],{},"这是因为部署脚本中的 ",[323,7120,7121],{},"scp"," 命令源路径使用了 ",[323,7124,7125],{},".../."," 结尾，这表示只复制目录的",[349,7128,7129],{},"内容","，而不是目录本身。",[7018,7132,7134],{"icon":7020,"label":7133},"`build` 或 `deploy` 失败后，为什么收不到失败通知？",[305,7135,7136,7137,7139,7140,7142],{},"因为失败通知作业 (",[323,7138,2113],{},") 的 ",[323,7141,7075],{}," 依赖了上游作业。一旦上游作业失败，该通知作业自身会被 GitLab 跳过 (skipped)。",[7018,7144,7146],{"icon":7020,"label":7145},"企业微信通知中的 `@` 为什么不生效？",[305,7147,7148,7149,7151],{},"企业微信的 Markdown 消息中，",[323,7150,2912],{}," 成员有严格的语法要求。",[7153,7154,7155],"style",{},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html pre.shiki code .ss7Ak, html code.shiki .ss7Ak{--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit}html pre.shiki code .sHsBP, html code.shiki .sHsBP{--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672}html pre.shiki code .swvn1, html code.shiki .swvn1{--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2}html pre.shiki code .sLACW, html code.shiki .sLACW{--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74}html pre.shiki code .sYThS, html code.shiki .sYThS{--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF}html pre.shiki code .siCPE, html code.shiki .siCPE{--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74}html pre.shiki code .s8HiA, html code.shiki .s8HiA{--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF}html pre.shiki code .sRxSC, html code.shiki .sRxSC{--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit}html pre.shiki code .sMLJd, html code.shiki .sMLJd{--shiki-light:#6182B8;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF}html pre.shiki code .sFhLe, html code.shiki .sFhLe{--shiki-light:#91B859;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF}html pre.shiki code .ss--_, html code.shiki .ss--_{--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2}html pre.shiki code .sGXK2, html code.shiki .sGXK2{--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672}html pre.shiki code .sR7ES, html code.shiki .sR7ES{--shiki-light:#E2931D;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E}html pre.shiki code .sTNss, html code.shiki .sTNss{--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672}html pre.shiki code .sQeA1, html code.shiki .sQeA1{--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF}html pre.shiki code .sSsL9, html code.shiki .sSsL9{--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F}html pre.shiki code .s00De, html code.shiki .s00De{--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2}html pre.shiki code .srJo8, html code.shiki .srJo8{--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic}html pre.shiki code .s91G_, html code.shiki .s91G_{--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2}html pre.shiki code .sD0ED, html code.shiki .sD0ED{--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E}html pre.shiki code .sQgqH, html code.shiki .sQgqH{--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic}html pre.shiki code .squCx, html code.shiki .squCx{--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2}html pre.shiki code .sKvfc, html code.shiki .sKvfc{--shiki-light:#E2931D;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline}html pre.shiki code .sh7YU, html code.shiki .sh7YU{--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E}html pre.shiki code .slF1C, html code.shiki .slF1C{--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F92672}html pre.shiki code .sJhdN, html code.shiki .sJhdN{--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74}html pre.shiki code .s-euU, html code.shiki .s-euU{--shiki-light:#90A4AE;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2}",{"title":416,"searchDepth":429,"depth":429,"links":7157},[7158,7159,7160,7165,7166],{"id":298,"depth":429,"text":298},{"id":316,"depth":429,"text":316},{"id":404,"depth":429,"text":404,"children":7161},[7162,7163,7164],{"id":408,"depth":435,"text":409},{"id":6829,"depth":435,"text":6829},{"id":6923,"depth":435,"text":6923},{"id":6963,"depth":429,"text":6963},{"id":7010,"depth":429,"text":7011},"md",null,{},{"title":206,"description":209},{"loc":207},"pKXhj-tEXAxVjm_IS-MzkZ2lE0B99Exv01ViAqWrBO8",[7174,7175],{"title":201,"path":202,"stem":203,"description":204,"children":-1},{"title":211,"path":212,"stem":213,"description":214,"children":-1},1756113718745]